<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SublocaFacil — Cadastro e Marketplace</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<style>
:root{
  --green:#0a6e5c;
  --green-l:#0d9e85;
  --green-xl:#e8f5f2;
  --ink:#0b1c18;
  --ink2:#1a3028;
  --muted:#5f7870;
  --border:#d8e8e4;
  --bg:#f5faf8;
  --white:#fff;
  --fh:'Cormorant Garamond',Georgia,serif;
  --fb:'DM Sans',system-ui,sans-serif;
  --rad:8px;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{font-family:var(--fb);background:var(--bg);color:var(--ink);-webkit-font-smoothing:antialiased;}

/* NAV */
.nav{position:fixed;top:0;left:0;right:0;z-index:300;height:64px;padding:0 56px;display:flex;align-items:center;justify-content:space-between;background:rgba(11,28,24,.96);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.05);}
.nav-brand{display:flex;align-items:center;gap:10px;cursor:pointer;}
.nav-mark{width:34px;height:34px;border-radius:8px;background:linear-gradient(135deg,var(--green),var(--green-l));display:flex;align-items:center;justify-content:center;font-family:var(--fh);font-size:17px;font-weight:600;color:white;}
.nav-name{font-family:var(--fh);font-size:19px;font-weight:600;color:white;letter-spacing:-.3px;}
.nav-right{display:flex;gap:10px;}
.btn-ghost{padding:8px 20px;border:1px solid rgba(255,255,255,.15);border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:500;color:rgba(255,255,255,.8);background:transparent;cursor:pointer;transition:all .2s;}
.btn-ghost:hover{background:rgba(255,255,255,.07);}
.btn-solid{padding:9px 22px;background:var(--green-l);border:none;border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:600;color:white;cursor:pointer;transition:all .2s;}
.btn-solid:hover{background:#0bb897;transform:translateY(-1px);}

/* ── HERO WITH SIGNUP ── */
.hero{
  min-height:100vh;
  background:linear-gradient(155deg,#050e0b 0%,#0b1c18 45%,#0f2820 100%);
  display:grid;grid-template-columns:1fr 1fr;
  align-items:center;padding:80px 56px 64px;gap:56px;
  position:relative;overflow:hidden;
}
.hero-glow{position:absolute;width:700px;height:700px;border-radius:50%;background:radial-gradient(circle,rgba(13,158,133,.12) 0%,transparent 65%);top:50%;right:-100px;transform:translateY(-50%);pointer-events:none;}
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(13,158,133,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(13,158,133,.03) 1px,transparent 1px);background-size:56px 56px;pointer-events:none;-webkit-mask-image:radial-gradient(ellipse 90% 90% at 30% 50%,black 30%,transparent 80%);}
.hero-left{position:relative;z-index:1;}
.hero-kicker{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:2px;color:var(--green-l);margin-bottom:22px;display:flex;align-items:center;gap:8px;}
.kicker-line{width:24px;height:1px;background:var(--green-l);}
.hero h1{font-family:var(--fh);font-size:clamp(36px,4.5vw,60px);font-weight:700;color:white;line-height:1.0;margin-bottom:16px;letter-spacing:-.5px;}
.hero h1 em{font-style:italic;font-weight:400;-webkit-text-stroke:1.5px var(--green-l);color:transparent;}
.hero-sub{font-family:var(--fh);font-size:clamp(16px,2vw,21px);font-weight:400;font-style:italic;color:rgba(255,255,255,.4);margin-bottom:18px;}
.hero-desc{font-size:15px;color:rgba(255,255,255,.42);line-height:1.8;margin-bottom:36px;max-width:440px;}
.hero-stats{display:flex;gap:36px;flex-wrap:wrap;}
.hs-n{font-family:var(--fh);font-size:28px;font-weight:600;color:white;}
.hs-l{font-size:11px;color:rgba(255,255,255,.3);margin-top:3px;letter-spacing:.2px;}

/* ── SIGNUP CARD ── */
.signup-card{
  background:var(--white);
  border-radius:16px;
  box-shadow:0 24px 80px rgba(0,0,0,.35),0 4px 16px rgba(0,0,0,.15);
  overflow:hidden;
  position:relative;z-index:1;
}

/* TABS */
.stabs{display:grid;grid-template-columns:1fr 1fr;border-bottom:1px solid var(--border);}
.stab{
  padding:20px 16px;text-align:center;cursor:pointer;
  border-bottom:2px solid transparent;
  background:var(--bg);transition:all .22s;
  display:flex;flex-direction:column;align-items:center;gap:4px;
}
.stab.active{background:var(--white);border-bottom-color:var(--green);}
.stab-title{font-size:14px;font-weight:600;color:var(--ink);transition:color .2s;}
.stab-desc{font-size:11px;color:var(--muted);transition:color .2s;}
.stab:not(.active) .stab-title{color:var(--muted);}

/* FORM BODY */
.sform{padding:28px 32px;display:none;}
.sform.active{display:block;}
.sform-title{font-family:var(--fh);font-size:22px;font-weight:600;color:var(--ink);margin-bottom:4px;}
.sform-sub{font-size:13px;color:var(--muted);margin-bottom:24px;line-height:1.5;}

/* TYPE SELECTOR */
.type-selector{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:20px;}
.type-btn{
  padding:10px 14px;
  border:1.5px solid var(--border);border-radius:var(--rad);
  background:white;cursor:pointer;transition:all .2s;
  text-align:center;
}
.type-btn.active{border-color:var(--green);background:var(--green-xl);}
.type-btn-title{font-size:13px;font-weight:600;color:var(--ink);transition:color .2s;}
.type-btn.active .type-btn-title{color:var(--green);}
.type-btn-sub{font-size:11px;color:var(--muted);margin-top:2px;}

/* FIELDS */
.field-group{margin-bottom:14px;}
.field-group label{
  display:block;
  font-size:10px;font-weight:600;
  text-transform:uppercase;letter-spacing:.7px;
  color:var(--muted);margin-bottom:5px;
}
.field-group input,
.field-group select{
  width:100%;padding:10px 13px;
  border:1.5px solid var(--border);border-radius:var(--rad);
  font-family:var(--fb);font-size:14px;color:var(--ink);
  background:white;outline:none;
  transition:border-color .2s,box-shadow .2s;
  -webkit-appearance:none;
}
.field-group input:focus,
.field-group select:focus{
  border-color:var(--green-l);
  box-shadow:0 0 0 3px rgba(13,158,133,.08);
}
.field-group input::placeholder{color:#b8ccc8;}
.field-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.field-row .field-group{margin-bottom:0;}

/* UPLOAD ZONES */
.upload-section{margin-bottom:14px;}
.upload-label{
  display:block;
  font-size:10px;font-weight:600;
  text-transform:uppercase;letter-spacing:.7px;
  color:var(--muted);margin-bottom:6px;
}
.upload-zone{
  border:1.5px dashed var(--border);
  border-radius:var(--rad);
  padding:16px 20px;
  background:var(--bg);
  cursor:pointer;
  transition:all .22s;
  position:relative;overflow:hidden;
  display:flex;align-items:center;gap:14px;
}
.upload-zone:hover{border-color:var(--green-l);background:var(--green-xl);}
.upload-zone.done{border-color:var(--green-l);background:var(--green-xl);border-style:solid;}
.upload-zone input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
.uz-icon{
  width:36px;height:36px;border-radius:7px;
  background:white;border:1px solid var(--border);
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;transition:all .2s;
}
.upload-zone:hover .uz-icon,.upload-zone.done .uz-icon{border-color:var(--green-l);background:white;}
.uz-icon svg{width:16px;height:16px;stroke:var(--muted);}
.upload-zone.done .uz-icon svg{stroke:var(--green);}
.uz-text{flex:1;}
.uz-main{font-size:13px;font-weight:500;color:var(--ink);margin-bottom:2px;}
.uz-sub{font-size:11px;color:var(--muted);}
.uz-done{font-size:12px;font-weight:600;color:var(--green);display:none;}
.upload-zone.done .uz-done{display:block;}
.upload-zone.done .uz-sub{display:none;}

/* SUBMIT */
.btn-submit{
  width:100%;background:var(--green);color:white;border:none;
  padding:13px;border-radius:var(--rad);
  font-family:var(--fb);font-size:14px;font-weight:600;
  cursor:pointer;transition:all .22s;
  margin-top:6px;letter-spacing:.1px;
}
.btn-submit:hover{background:#086649;transform:translateY(-1px);box-shadow:0 8px 24px rgba(10,110,92,.25);}
.btn-submit:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none;}
.form-login{text-align:center;font-size:12px;color:var(--muted);margin-top:12px;}
.form-login a{color:var(--green);font-weight:600;cursor:pointer;}

/* ── MARKETPLACE ── */
.marketplace{padding:80px 56px;background:var(--white);}
.mkt-inner{max-width:1200px;margin:0 auto;}
.section-top{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:28px;flex-wrap:wrap;gap:12px;}
.section-eyebrow{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1.5px;color:var(--green);margin-bottom:6px;}
.section-title{font-family:var(--fh);font-size:clamp(22px,3vw,36px);font-weight:600;color:var(--ink);letter-spacing:-.3px;}
.btn-seeall{padding:9px 20px;border:1.5px solid var(--border);border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:500;color:var(--ink);background:transparent;cursor:pointer;transition:all .2s;}
.btn-seeall:hover{border-color:var(--green-l);color:var(--green);}

/* FILTERS */
.filters{
  display:flex;gap:10px;flex-wrap:wrap;
  padding:16px 20px;
  background:var(--bg);border:1px solid var(--border);border-radius:var(--rad);
  margin-bottom:24px;align-items:flex-end;
}
.filter-group{display:flex;flex-direction:column;gap:4px;flex:1;min-width:140px;}
.filter-group label{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.6px;color:var(--muted);}
.filter-group select{padding:8px 11px;border:1.5px solid var(--border);border-radius:6px;font-family:var(--fb);font-size:13px;color:var(--ink);background:white;outline:none;cursor:pointer;}
.filter-group select:focus{border-color:var(--green-l);}
.btn-filter{padding:9px 22px;background:var(--green);color:white;border:none;border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap;align-self:flex-end;}
.btn-filter:hover{background:#086649;}

/* ROOMS GRID */
.rooms-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;}
.room-card{background:white;border:1px solid var(--border);border-radius:12px;overflow:hidden;cursor:pointer;transition:all .25s;box-shadow:0 1px 4px rgba(0,0,0,.05);}
.room-card:hover{transform:translateY(-3px);box-shadow:0 12px 36px rgba(0,0,0,.09);border-color:var(--green-l);}
.rc-img{height:175px;background:linear-gradient(135deg,var(--green-xl),#d0eeea);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;}
.rc-img-inner{width:100%;height:100%;display:flex;align-items:center;justify-content:center;}
.rc-specialty{position:absolute;top:10px;left:10px;background:white;border-radius:4px;padding:3px 9px;font-size:10px;font-weight:600;color:var(--green);letter-spacing:.3px;}
.rc-verified{position:absolute;top:10px;right:10px;background:var(--green);border-radius:4px;padding:3px 9px;font-size:10px;font-weight:600;color:white;letter-spacing:.3px;}
.rc-body{padding:16px 18px;}
.rc-clinic{font-size:10px;font-weight:600;color:var(--green);text-transform:uppercase;letter-spacing:.6px;margin-bottom:4px;}
.rc-name{font-family:var(--fh);font-size:16px;font-weight:600;color:var(--ink);margin-bottom:4px;line-height:1.3;}
.rc-loc{font-size:12px;color:var(--muted);margin-bottom:10px;}
.rc-tags{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:12px;}
.rc-tag{background:var(--bg);border:1px solid var(--border);border-radius:4px;padding:2px 8px;font-size:11px;color:var(--muted);}
.rc-foot{display:flex;align-items:center;justify-content:space-between;padding-top:12px;border-top:1px solid var(--bg);}
.rc-price{font-family:var(--fh);font-size:22px;font-weight:600;color:var(--green);}
.rc-price span{font-size:12px;color:var(--muted);font-family:var(--fb);font-weight:400;}
.btn-view{padding:7px 16px;background:var(--green-xl);color:var(--green);border:none;border-radius:6px;font-family:var(--fb);font-size:12px;font-weight:600;cursor:pointer;transition:all .2s;}
.btn-view:hover{background:var(--green);color:white;}

.loading-state{text-align:center;padding:56px;color:var(--muted);}
.spinner{width:28px;height:28px;border:2.5px solid var(--border);border-top-color:var(--green-l);border-radius:50%;animation:spin .7s linear infinite;margin:0 auto 12px;}
@keyframes spin{to{transform:rotate(360deg)}}

/* ── HOW IT WORKS ── */
.how{padding:80px 56px;background:var(--bg);}
.how-inner{max-width:1100px;margin:0 auto;}
.how-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-top:40px;}
.hw-card{background:white;border:1px solid var(--border);border-radius:12px;padding:28px 22px;text-align:center;transition:all .25s;}
.hw-card:hover{transform:translateY(-3px);border-color:var(--green-l);box-shadow:0 8px 24px rgba(0,0,0,.06);}
.hw-num{width:38px;height:38px;border-radius:8px;background:var(--green-xl);color:var(--green);font-family:var(--fh);font-size:17px;font-weight:600;display:flex;align-items:center;justify-content:center;margin:0 auto 14px;}
.hw-card h3{font-family:var(--fh);font-size:16px;font-weight:600;margin-bottom:8px;}
.hw-card p{font-size:13px;color:var(--muted);line-height:1.65;}

/* ── MODAL ── */
.modal-ov{position:fixed;inset:0;background:rgba(11,28,24,.6);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;pointer-events:none;transition:opacity .3s;}
.modal-ov.open{opacity:1;pointer-events:all;}
.modal-box{background:white;border-radius:16px;width:100%;max-width:480px;max-height:92vh;overflow-y:auto;box-shadow:0 24px 80px rgba(0,0,0,.25);transform:translateY(16px);transition:transform .3s;}
.modal-ov.open .modal-box{transform:translateY(0);}
.modal-head{padding:22px 26px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:white;z-index:1;border-radius:16px 16px 0 0;}
.modal-head h2{font-family:var(--fh);font-size:20px;font-weight:600;}
.modal-close{width:30px;height:30px;border-radius:50%;border:1px solid var(--border);background:transparent;cursor:pointer;font-size:16px;color:var(--muted);display:flex;align-items:center;justify-content:center;transition:all .2s;}
.modal-close:hover{background:var(--bg);}
.modal-body{padding:22px 26px 28px;}

/* SUCCESS STATE */
.success-state{text-align:center;padding:16px 0;}
.success-icon{width:56px;height:56px;border-radius:50%;background:var(--green-xl);border:2px solid rgba(10,110,92,.2);display:flex;align-items:center;justify-content:center;margin:0 auto 18px;}
.success-icon svg{width:24px;height:24px;stroke:var(--green);}
.success-title{font-family:var(--fh);font-size:22px;font-weight:600;margin-bottom:10px;}
.success-text{font-size:14px;color:var(--muted);line-height:1.7;margin-bottom:18px;}
.success-info{background:var(--green-xl);border:1px solid rgba(13,158,133,.2);border-radius:8px;padding:14px 16px;text-align:left;margin-bottom:20px;font-size:13px;line-height:1.8;color:var(--ink);}

/* TOAST */
.toast{position:fixed;bottom:24px;right:24px;z-index:9999;background:var(--ink2);color:white;padding:12px 18px;border-radius:8px;font-size:13px;font-weight:500;box-shadow:0 8px 32px rgba(0,0,0,.22);opacity:0;pointer-events:none;transition:opacity .3s;border-left:3px solid var(--green-l);}
.toast.show{opacity:1;}

/* FOOTER */
footer{background:#060f0c;padding:52px 56px 0;}
.fi{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;padding-bottom:40px;}
.fb{display:flex;align-items:center;gap:10px;margin-bottom:11px;}
.fb-name{font-family:var(--fh);font-size:18px;font-weight:600;color:white;letter-spacing:-.2px;}
.fdesc{font-size:13px;color:rgba(255,255,255,.28);line-height:1.7;margin-bottom:18px;}
.fq-label{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.22);margin-bottom:8px;}
.fq-row{display:flex;gap:7px;}
.fq-row input{flex:1;padding:8px 11px;border:1px solid rgba(255,255,255,.08);border-radius:6px;font-family:var(--fb);font-size:12px;color:white;background:rgba(255,255,255,.04);outline:none;}
.fq-row input::placeholder{color:rgba(255,255,255,.22);}
.fq-row input:focus{border-color:var(--green-l);}
.fq-btn{background:var(--green);color:white;border:none;padding:8px 16px;border-radius:6px;font-family:var(--fb);font-size:12px;font-weight:600;cursor:pointer;}
.fq-btn:hover{background:var(--green-l);}
.fcol h4{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.22);margin-bottom:12px;}
.fcol a{display:block;font-size:13px;color:rgba(255,255,255,.38);text-decoration:none;margin-bottom:7px;cursor:pointer;transition:color .2s;}
.fcol a:hover{color:rgba(255,255,255,.8);}
.fbot{max-width:1100px;margin:0 auto;padding:20px 0;border-top:1px solid rgba(255,255,255,.05);display:flex;justify-content:space-between;font-size:12px;color:rgba(255,255,255,.18);}

@media(max-width:960px){
  .nav{padding:0 20px;}
  .hero{grid-template-columns:1fr;padding:82px 20px 52px;text-align:center;}
  .hero-stats{justify-content:center;}
  .marketplace,.how{padding:64px 20px;}
  .how-grid{grid-template-columns:1fr 1fr;}
  .fi{grid-template-columns:1fr 1fr;}
  footer{padding:44px 20px 0;}
}
@media(max-width:600px){
  .filters{flex-direction:column;}
  .field-row{grid-template-columns:1fr;}
  .sform{padding:22px 20px;}
}
</style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <div class="nav-brand" onclick="window.location.href='index.html'">
    <div class="nav-mark">S</div>
    <div class="nav-name">SublocaFacil</div>
  </div>
  <div class="nav-right">
    <button class="btn-ghost" onclick="window.location.href='index.html#loginSec'">Entrar</button>
    <button class="btn-solid" onclick="scrollToSignup()">Criar conta</button>
  </div>
</nav>

<!-- HERO + SIGNUP -->
<section class="hero">
  <div class="hero-glow"></div>
  <div class="hero-grid"></div>

  <!-- LEFT -->
  <div class="hero-left">
    <div class="hero-kicker"><span class="kicker-line"></span>Plataforma de sublocação na área da saúde</div>
    <h1>Transforme espaços<br>ociosos em<br><em>faturamento.</em></h1>
    <div class="hero-sub">Ou encontre o consultório ideal para atender hoje mesmo.</div>
    <p class="hero-desc">Conectamos clínicas, espaços terapêuticos e coworkings de saúde que desejam aumentar a receita com profissionais que precisam de salas prontas para atender.</p>
    <div class="hero-stats">
      <div><div class="hs-n">200+</div><div class="hs-l">Espaços disponíveis</div></div>
      <div><div class="hs-n">1.800+</div><div class="hs-l">Profissionais ativos</div></div>
      <div><div class="hs-n">15</div><div class="hs-l">Cidades atendidas</div></div>
    </div>
  </div>

  <!-- SIGNUP CARD -->
  <div class="signup-card" id="signupCard">
    <div class="stabs">
      <div class="stab active" id="tabEsp" onclick="switchTab('esp')">
        <div class="stab-title">Tenho um espaço</div>
        <div class="stab-desc">Quero anunciar e sublocar</div>
      </div>
      <div class="stab" id="tabPro" onclick="switchTab('pro')">
        <div class="stab-title">Sou profissional</div>
        <div class="stab-desc">Quero sublocar um espaço</div>
      </div>
    </div>

    <!-- FORM ESPAÇO -->
    <div class="sform active" id="formEsp">
      <div class="sform-title">Cadastrar meu espaço</div>
      <div class="sform-sub">Preencha os dados para anunciar suas salas na plataforma</div>

      <div class="type-selector">
        <div class="type-btn active" id="tipoPJ" onclick="switchTipo('PJ')">
          <div class="type-btn-title">Pessoa Jurídica</div>
          <div class="type-btn-sub">CNPJ da empresa</div>
        </div>
        <div class="type-btn" id="tipoPF" onclick="switchTipo('PF')">
          <div class="type-btn-title">Pessoa Física</div>
          <div class="type-btn-sub">CPF do responsável</div>
        </div>
      </div>

      <div class="field-group">
        <label>Nome do espaço / clínica</label>
        <input type="text" id="e_nome" placeholder="Ex: Clínica Bem Estar"/>
      </div>
      <div class="field-row">
        <div class="field-group">
          <label>Nome do responsável</label>
          <input type="text" id="e_resp" placeholder="Nome completo"/>
        </div>
        <div class="field-group">
          <label>WhatsApp</label>
          <input type="text" id="e_tel" placeholder="(11) 99999-9999"/>
        </div>
      </div>
      <div class="field-group">
        <label>E-mail</label>
        <input type="email" id="e_email" placeholder="contato@espaco.com"/>
      </div>
      <div class="field-row">
        <div class="field-group">
          <label>Senha</label>
          <input type="password" id="e_senha" placeholder="Mínimo 8 caracteres"/>
        </div>
        <div class="field-group">
          <label id="docLabel">CNPJ</label>
          <input type="text" id="e_doc" placeholder="00.000.000/0001-00"/>
        </div>
      </div>

      <div class="upload-section">
        <div class="upload-label" id="uploadLabel1">Contrato social (PJ) ou RG/CNH do responsável (PF)</div>
        <div class="upload-zone" id="uz1">
          <input type="file" id="e_f1" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('e_f1','uz1','uzd1')"/>
          <div class="uz-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          </div>
          <div class="uz-text">
            <div class="uz-main">Clique para selecionar ou arraste o arquivo</div>
            <div class="uz-sub">PDF, JPG ou PNG — máx. 10 MB</div>
            <div class="uz-done" id="uzd1"></div>
          </div>
        </div>
      </div>

      <div class="upload-section">
        <div class="upload-label">Documento com foto do responsável (RG ou CNH)</div>
        <div class="upload-zone" id="uz2">
          <input type="file" id="e_f2" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('e_f2','uz2','uzd2')"/>
          <div class="uz-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="14" rx="2"/><circle cx="9" cy="10" r="2"/><path d="m21 15-3.5-3.5L13 16"/></svg>
          </div>
          <div class="uz-text">
            <div class="uz-main">Clique para selecionar ou arraste o arquivo</div>
            <div class="uz-sub">PDF, JPG ou PNG — máx. 10 MB</div>
            <div class="uz-done" id="uzd2"></div>
          </div>
        </div>
      </div>

      <div class="upload-section">
        <div class="upload-label">Comprovante de endereço do espaço</div>
        <div class="upload-zone" id="uz3">
          <input type="file" id="e_f3" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('e_f3','uz3','uzd3')"/>
          <div class="uz-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          </div>
          <div class="uz-text">
            <div class="uz-main">Conta de luz, água ou IPTU</div>
            <div class="uz-sub">PDF, JPG ou PNG — máx. 10 MB</div>
            <div class="uz-done" id="uzd3"></div>
          </div>
        </div>
      </div>

      <button class="btn-submit" id="btnEsp" onclick="cadastrarEspaco()">Cadastrar meu espaço</button>
      <div class="form-login">Já tem conta? <a onclick="window.location.href='index.html#loginSec'">Acessar painel</a></div>
    </div>

    <!-- FORM PROFISSIONAL -->
    <div class="sform" id="formPro">
      <div class="sform-title">Cadastro de profissional</div>
      <div class="sform-sub">Acesse espaços clínicos verificados em todo o Brasil</div>

      <div class="field-group">
        <label>Nome completo</label>
        <input type="text" id="p_nome" placeholder="Nome e sobrenome"/>
      </div>
      <div class="field-row">
        <div class="field-group">
          <label>E-mail</label>
          <input type="email" id="p_email" placeholder="seu@email.com"/>
        </div>
        <div class="field-group">
          <label>WhatsApp</label>
          <input type="text" id="p_tel" placeholder="(11) 99999-9999"/>
        </div>
      </div>
      <div class="field-group">
        <label>Senha</label>
        <input type="password" id="p_senha" placeholder="Mínimo 8 caracteres"/>
      </div>
      <div class="field-row">
        <div class="field-group">
          <label>Conselho profissional</label>
          <select id="p_conselho">
            <option value="">Selecione o conselho</option>
            <option value="CRP">CRP — Psicologia</option>
            <option value="CRM">CRM — Medicina</option>
            <option value="CRN">CRN — Nutrição</option>
            <option value="CREFITO">CREFITO — Fisioterapia</option>
            <option value="CFFa">CFFa — Fonoaudiologia</option>
            <option value="CRO">CRO — Odontologia</option>
            <option value="COREN">COREN — Enfermagem</option>
            <option value="CFF">CFF — Farmácia</option>
            <option value="CFMV">CFMV — Medicina Veterinária</option>
            <option value="outro">Outro conselho</option>
          </select>
        </div>
        <div class="field-group">
          <label>Número de registro</label>
          <input type="text" id="p_reg" placeholder="Ex: 06/123456"/>
        </div>
      </div>
      <div class="field-group">
        <label>CPF</label>
        <input type="text" id="p_cpf" placeholder="000.000.000-00"/>
      </div>

      <div class="upload-section">
        <div class="upload-label">Documento com foto (RG ou CNH)</div>
        <div class="upload-zone" id="puz1">
          <input type="file" id="p_f1" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('p_f1','puz1','puzd1')"/>
          <div class="uz-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="14" rx="2"/><circle cx="9" cy="10" r="2"/><path d="m21 15-3.5-3.5L13 16"/></svg>
          </div>
          <div class="uz-text">
            <div class="uz-main">Clique para selecionar ou arraste o arquivo</div>
            <div class="uz-sub">PDF, JPG ou PNG — máx. 10 MB</div>
            <div class="uz-done" id="puzd1"></div>
          </div>
        </div>
      </div>

      <div class="upload-section">
        <div class="upload-label">Comprovante de registro no conselho</div>
        <div class="upload-zone" id="puz2">
          <input type="file" id="p_f2" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('p_f2','puz2','puzd2')"/>
          <div class="uz-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          </div>
          <div class="uz-text">
            <div class="uz-main">Carteirinha, certidão ou comprovante</div>
            <div class="uz-sub">PDF, JPG ou PNG — máx. 10 MB</div>
            <div class="uz-done" id="puzd2"></div>
          </div>
        </div>
      </div>

      <button class="btn-submit" id="btnPro" onclick="cadastrarProfissional()">Criar minha conta</button>
      <div class="form-login">Já tem conta? <a onclick="window.location.href='index.html#loginSec'">Acessar painel</a></div>
    </div>
  </div>
</section>

<!-- MARKETPLACE -->
<section class="marketplace" id="salas">
  <div class="mkt-inner">
    <div class="section-top">
      <div>
        <div class="section-eyebrow">Marketplace</div>
        <div class="section-title">Espaços disponíveis</div>
      </div>
      <button class="btn-seeall" onclick="loadRooms()">Atualizar listagem</button>
    </div>

    <div class="filters">
      <div class="filter-group">
        <label>Estado</label>
        <select id="fEst" onchange="loadCities()">
          <option value="">Todos os estados</option>
          <option value="SP">São Paulo</option>
          <option value="RJ">Rio de Janeiro</option>
          <option value="MG">Minas Gerais</option>
          <option value="PR">Paraná</option>
          <option value="RS">Rio Grande do Sul</option>
          <option value="SC">Santa Catarina</option>
          <option value="BA">Bahia</option>
          <option value="DF">Distrito Federal</option>
        </select>
      </div>
      <div class="filter-group">
        <label>Município</label>
        <select id="fCid"><option value="">Todos os municípios</option></select>
      </div>
      <div class="filter-group">
        <label>Especialidade</label>
        <select id="fEsp2">
          <option value="">Todas</option>
          <option value="Psicologia">Psicologia</option>
          <option value="Medicina">Medicina</option>
          <option value="Nutrição">Nutrição</option>
          <option value="Fisioterapia">Fisioterapia</option>
          <option value="Odontologia">Odontologia</option>
          <option value="Multiuso">Multiuso</option>
        </select>
      </div>
      <div class="filter-group">
        <label>Valor máximo / sessão</label>
        <select id="fVal">
          <option value="">Qualquer valor</option>
          <option value="50">Até R$ 50</option>
          <option value="100">Até R$ 100</option>
          <option value="150">Até R$ 150</option>
        </select>
      </div>
      <button class="btn-filter" onclick="applyFilters()">Buscar</button>
    </div>

    <div id="roomsGrid"><div class="loading-state"><div class="spinner"></div>Carregando espaços...</div></div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how">
  <div class="how-inner">
    <div style="text-align:center">
      <div class="section-eyebrow">Processo simples</div>
      <div class="section-title">Como funciona</div>
    </div>
    <div class="how-grid">
      <div class="hw-card"><div class="hw-num">1</div><h3>Cadastro verificado</h3><p>Envie seus documentos e registro profissional. Nossa equipe valida em até 24 horas.</p></div>
      <div class="hw-card"><div class="hw-num">2</div><h3>Encontre o espaço</h3><p>Filtre por cidade, especialidade e valor. Veja disponibilidade em tempo real.</p></div>
      <div class="hw-card"><div class="hw-num">3</div><h3>Assine o contrato</h3><p>Contrato digital gerado automaticamente com validade jurídica. Sem papel.</p></div>
      <div class="hw-card"><div class="hw-num">4</div><h3>Comece a atender</h3><p>Gerencie reservas e pagamentos em um único painel. Simples e ágil.</p></div>
    </div>
  </div>
</section>

<!-- MODAL SUCESSO -->
<div class="modal-ov" id="modalOv">
  <div class="modal-box">
    <div class="modal-head">
      <h2 id="mTitle">Cadastro recebido</h2>
      <button class="modal-close" onclick="closeModal()">&#10005;</button>
    </div>
    <div class="modal-body" id="mBody"></div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="fi">
    <div>
      <div class="fb"><div class="nav-mark">S</div><div class="fb-name">SublocaFacil</div></div>
      <div class="fdesc">A plataforma que conecta espaços ociosos a profissionais de saúde. Simples, seguro e profissional.</div>
      <div class="fq-label">Acesso rápido</div>
      <div class="fq-row">
        <input type="email" id="fEmail" placeholder="E-mail"/>
        <input type="password" id="fSenha" placeholder="Senha"/>
        <button class="fq-btn" onclick="footerLogin()">Entrar</button>
      </div>
    </div>
    <div class="fcol"><h4>Plataforma</h4><a href="#salas">Ver espaços</a><a onclick="switchTab('pro');scrollToSignup()">Sou profissional</a><a onclick="switchTab('esp');scrollToSignup()">Anunciar espaço</a><a href="index.html">Página inicial</a></div>
    <div class="fcol"><h4>Suporte</h4><a>Central de ajuda</a><a>Fale conosco</a><a href="#how">Como funciona</a></div>
    <div class="fcol"><h4>Legal</h4><a>Termos de uso</a><a>Privacidade</a><a>LGPD</a></div>
  </div>
  <div class="fbot">
    <span>© 2026 SublocaFacil — Todos os direitos reservados</span>
    <span>Plataforma verificada · Segura · Profissional</span>
  </div>
</footer>

<div class="toast" id="toast"></div>

<script>
const CITIES={SP:['São Paulo','Campinas','Santos','Guarulhos','Osasco','Ribeirão Preto'],RJ:['Rio de Janeiro','Niterói','São Gonçalo','Duque de Caxias'],MG:['Belo Horizonte','Uberlândia','Contagem','Juiz de Fora'],PR:['Curitiba','Londrina','Maringá','Ponta Grossa'],RS:['Porto Alegre','Caxias do Sul','Pelotas','Canoas'],SC:['Florianópolis','Joinville','Blumenau','São José'],BA:['Salvador','Feira de Santana'],DF:['Brasília','Taguatinga']};

const DEMOS=[
  {id:'s1',clinica:'Clínica Esperança',nome:'Sala de Acolhimento',cidade:'São Paulo',estado:'SP',bairro:'Vila Mariana',valor:31.90,esp:'Psicologia',hI:'08:00',hF:'21:00',dias:'Seg–Sex'},
  {id:'s2',clinica:'Instituto Integra',nome:'Consultório Médico',cidade:'São Paulo',estado:'SP',bairro:'Pinheiros',valor:55.00,esp:'Medicina',hI:'09:00',hF:'20:00',dias:'Seg–Sex'},
  {id:'s3',clinica:'Espaço Saúde+',nome:'Sala Multiuso',cidade:'Campinas',estado:'SP',bairro:'Cambuí',valor:28.00,esp:'Multiuso',hI:'08:00',hF:'18:00',dias:'Ter e Qui'},
  {id:'s4',clinica:'Clínica Viver',nome:'Consultório de Fisioterapia',cidade:'Curitiba',estado:'PR',bairro:'Batel',valor:38.00,esp:'Fisioterapia',hI:'08:00',hF:'22:00',dias:'Seg–Sex'},
  {id:'s5',clinica:'Centro Saúde Sul',nome:'Sala Terapêutica',cidade:'Porto Alegre',estado:'RS',bairro:'Moinhos de Vento',valor:42.00,esp:'Psicologia',hI:'09:00',hF:'20:00',dias:'Seg–Sex'},
  {id:'s6',clinica:'Nutri Rio',nome:'Consultório de Nutrição',cidade:'Rio de Janeiro',estado:'RJ',bairro:'Ipanema',valor:48.00,esp:'Nutrição',hI:'08:00',hF:'21:00',dias:'Seg–Sex'},
];

let tipoPessoa='PJ';

function toast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3500);}
function scrollToSignup(){document.getElementById('signupCard').scrollIntoView({behavior:'smooth',block:'center'});}

function switchTab(tab){
  ['Esp','Pro'].forEach(k=>{
    document.getElementById('tab'+k).classList.remove('active');
    document.getElementById('form'+k).classList.remove('active');
  });
  const k=tab==='esp'?'Esp':'Pro';
  document.getElementById('tab'+k).classList.add('active');
  document.getElementById('form'+k).classList.add('active');
}

function switchTipo(t){
  tipoPessoa=t;
  document.getElementById('tipoPJ').classList.toggle('active',t==='PJ');
  document.getElementById('tipoPF').classList.toggle('active',t==='PF');
  document.getElementById('docLabel').textContent=t==='PJ'?'CNPJ':'CPF';
  document.getElementById('e_doc').placeholder=t==='PJ'?'00.000.000/0001-00':'000.000.000-00';
}

function handleUpload(inputId,zoneId,doneId){
  const f=document.getElementById(inputId).files[0];
  if(!f)return;
  const z=document.getElementById(zoneId);
  const d=document.getElementById(doneId);
  z.classList.add('done');
  d.textContent=f.name;
}

function loadCities(){
  const e=document.getElementById('fEst').value;
  const s=document.getElementById('fCid');
  s.innerHTML='<option value="">Todos os municípios</option>';
  (CITIES[e]||[]).forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;s.appendChild(o);});
}

function applyFilters(){
  const e=document.getElementById('fEst').value;
  const c=document.getElementById('fCid').value;
  const esp=document.getElementById('fEsp2').value;
  const v=parseFloat(document.getElementById('fVal').value)||Infinity;
  let r=[...DEMOS];
  if(e)r=r.filter(s=>s.estado===e);
  if(c)r=r.filter(s=>s.cidade===c);
  if(esp)r=r.filter(s=>s.esp===esp);
  r=r.filter(s=>s.valor<=v);
  renderRooms(r);
}

function loadRooms(){renderRooms(DEMOS);}

function renderRooms(list){
  if(!list.length){
    document.getElementById('roomsGrid').innerHTML='<div class="loading-state" style="opacity:.5">Nenhum espaço encontrado para os filtros selecionados.</div>';
    return;
  }
  document.getElementById('roomsGrid').innerHTML=`<div class="rooms-grid">${list.map(s=>`
    <div class="room-card" onclick="window.location.href='sala-detalhe.html?id=${s.id}'">
      <div class="rc-img">
        <div class="rc-img-inner" style="background:linear-gradient(135deg,var(--green-xl),#d0eeea)"></div>
        <div class="rc-specialty">${s.esp}</div>
        <div class="rc-verified">Verificado</div>
      </div>
      <div class="rc-body">
        <div class="rc-clinic">${s.clinica}</div>
        <div class="rc-name">${s.nome}</div>
        <div class="rc-loc">${s.bairro} · ${s.cidade}, ${s.estado}</div>
        <div class="rc-tags">
          <span class="rc-tag">${s.dias}</span>
          <span class="rc-tag">${s.hI} – ${s.hF}</span>
        </div>
        <div class="rc-foot">
          <div class="rc-price">R$ ${s.valor.toFixed(2)}<span> / sessão</span></div>
          <button class="btn-view">Ver espaço</button>
        </div>
      </div>
    </div>`).join('')}</div>`;
}

async function cadastrarEspaco(){
  const n=document.getElementById('e_nome').value.trim();
  const r=document.getElementById('e_resp').value.trim();
  const em=document.getElementById('e_email').value.trim();
  const s=document.getElementById('e_senha').value;
  const d=document.getElementById('e_doc').value.trim();
  const f1=document.getElementById('e_f1').files[0];
  const f2=document.getElementById('e_f2').files[0];
  const f3=document.getElementById('e_f3').files[0];
  if(!n||!r||!em||!s||!d){toast('Preencha todos os campos obrigatórios');return;}
  if(s.length<8){toast('A senha deve ter no mínimo 8 caracteres');return;}
  if(!f1||!f2||!f3){toast('Envie todos os documentos obrigatórios');return;}
  const btn=document.getElementById('btnEsp');
  btn.disabled=true;btn.textContent='Enviando...';
  try{
    const db=getSupabase();
    const{data:c,error:e}=await db.from('clinicas').insert({nome:n,proprietaria:r,email:em,plano:'profissional',status:'pendente_aprovacao',whatsapp:document.getElementById('e_tel').value,cnpj:tipoPessoa==='PJ'?d:null}).select().single();
    if(e)throw new Error('E-mail já cadastrado');
    await Promise.all([
      db.storage.from('documentos').upload(`clinicas/${c.id}/doc_social`,f1,{upsert:true}),
      db.storage.from('documentos').upload(`clinicas/${c.id}/doc_foto`,f2,{upsert:true}),
      db.storage.from('documentos').upload(`clinicas/${c.id}/doc_end`,f3,{upsert:true}),
    ]);
    await db.from('usuarios').insert({clinica_id:c.id,nome:r,email:em,senha_hash:btoa(s),role:'admin'});
    await db.from('config_clinica').insert({clinica_id:c.id});
    openSuccessModal('esp',r.split(' ')[0],em);
  }catch(err){
    toast(err.message||'Erro ao cadastrar. Tente novamente.');
    btn.disabled=false;btn.textContent='Cadastrar meu espaço';
  }
}

async function cadastrarProfissional(){
  const n=document.getElementById('p_nome').value.trim();
  const em=document.getElementById('p_email').value.trim();
  const s=document.getElementById('p_senha').value;
  const cons=document.getElementById('p_conselho').value;
  const reg=document.getElementById('p_reg').value.trim();
  const cpf=document.getElementById('p_cpf').value.trim();
  const f1=document.getElementById('p_f1').files[0];
  const f2=document.getElementById('p_f2').files[0];
  if(!n||!em||!s||!cons||!reg||!cpf){toast('Preencha todos os campos obrigatórios');return;}
  if(s.length<8){toast('A senha deve ter no mínimo 8 caracteres');return;}
  if(!f1||!f2){toast('Envie os documentos obrigatórios');return;}
  const btn=document.getElementById('btnPro');
  btn.disabled=true;btn.textContent='Enviando...';
  try{
    const db=getSupabase();
    const{data:p,error:e}=await db.from('psicologas').insert({nome:n,email:em,cpf,crp:reg,tipo_sub:'avulso',status:'pendente_aprovacao',telefone:document.getElementById('p_tel').value,clinica_id:null}).select().single();
    if(e)throw new Error('E-mail já cadastrado');
    await Promise.all([
      db.storage.from('documentos').upload(`profissionais/${p.id}/doc_foto`,f1,{upsert:true}),
      db.storage.from('documentos').upload(`profissionais/${p.id}/doc_reg`,f2,{upsert:true}),
    ]);
    localStorage.setItem('hope_psi_logada',JSON.stringify({id:p.id,nome:n,email:em,crp:reg,conselho:cons,status:'pendente_aprovacao'}));
    openSuccessModal('pro',n.split(' ')[0],em);
  }catch(err){
    toast(err.message||'Erro ao cadastrar. Tente novamente.');
    btn.disabled=false;btn.textContent='Criar minha conta';
  }
}

function openSuccessModal(tipo,nome,email){
  const isEsp=tipo==='esp';
  document.getElementById('mTitle').textContent=isEsp?'Espaço cadastrado':'Cadastro recebido';
  document.getElementById('mBody').innerHTML=`
    <div class="success-state">
      <div class="success-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
      </div>
      <div class="success-title">Olá, ${nome}!</div>
      <div class="success-text">Seu cadastro foi recebido com sucesso.<br>Nossa equipe verificará seus documentos em até <strong>24 horas</strong>.</div>
      <div class="success-info">
        Confirmação enviada para <strong>${email}</strong><br>
        Análise de documentos em até 24h<br>
        ${isEsp?'Após aprovação, você poderá cadastrar suas salas':'Após aprovação, você poderá reservar espaços'}
      </div>
      <button class="btn-submit" onclick="closeModal()">Entendido</button>
    </div>`;
  document.getElementById('modalOv').classList.add('open');
}

function closeModal(){document.getElementById('modalOv').classList.remove('open');}

function footerLogin(){
  const e=document.getElementById('fEmail').value.trim();
  const s=document.getElementById('fSenha').value;
  if(!e||!s){toast('Preencha e-mail e senha');return;}
  window.location.href='painel-psi.html';
}

document.addEventListener('DOMContentLoaded',loadRooms);
</script>
</body>
</html>
