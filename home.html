<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SublocaFacil — Cadastro e Espaços</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<style>
:root{
  --g:#0a6e5c;--gl:#0d9e85;--gx:#e8f5f2;
  --ink:#0b1c18;--ink2:#1a3028;--ink3:#0f2820;
  --mu:#5f7870;--bo:#d8e8e4;--bg:#f5faf8;--w:#fff;
  --fh:'Cormorant Garamond',Georgia,serif;
  --fb:'DM Sans',system-ui,sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{font-family:var(--fb);background:var(--bg);color:var(--ink);-webkit-font-smoothing:antialiased;overflow-x:hidden;}
.nav{position:fixed;top:0;left:0;right:0;z-index:300;height:64px;padding:0 52px;display:flex;align-items:center;justify-content:space-between;background:rgba(11,28,24,.96);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.05);}
.nav-brand{display:flex;align-items:center;gap:10px;cursor:pointer;}
.nav-mark{width:34px;height:34px;border-radius:8px;background:linear-gradient(135deg,var(--g),var(--gl));display:flex;align-items:center;justify-content:center;font-family:var(--fh);font-size:17px;font-weight:600;color:white;}
.nav-name{font-family:var(--fh);font-size:19px;font-weight:600;color:white;letter-spacing:-.3px;}
.nav-right{display:flex;gap:10px;}
.btn-ghost{padding:8px 20px;border:1px solid rgba(255,255,255,.15);border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:500;color:rgba(255,255,255,.8);background:transparent;cursor:pointer;transition:all .2s;}
.btn-ghost:hover{background:rgba(255,255,255,.07);}
.btn-solid{padding:9px 22px;background:var(--gl);border:none;border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:600;color:white;cursor:pointer;transition:all .2s;}
.btn-solid:hover{background:#0bb897;transform:translateY(-1px);}
.hero{min-height:100vh;background:linear-gradient(155deg,#050e0b 0%,var(--ink) 45%,var(--ink3) 100%);display:grid;grid-template-columns:1fr 1fr;align-items:center;padding:80px 52px 64px;gap:48px;position:relative;overflow:hidden;}
.hero-glow{position:absolute;width:700px;height:700px;border-radius:50%;background:radial-gradient(circle,rgba(13,158,133,.11) 0%,transparent 65%);top:50%;right:-80px;transform:translateY(-50%);pointer-events:none;}
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(13,158,133,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(13,158,133,.03) 1px,transparent 1px);background-size:56px 56px;pointer-events:none;-webkit-mask-image:radial-gradient(ellipse 80% 90% at 25% 50%,black 20%,transparent 75%);}
.hero-left{position:relative;z-index:1;}
.hero-kicker{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:2px;color:var(--gl);margin-bottom:20px;display:flex;align-items:center;gap:8px;opacity:.9;}
.kicker-line{width:24px;height:1px;background:var(--gl);}
.hero h1{font-family:var(--fh);font-size:clamp(34px,4.2vw,58px);font-weight:700;color:white;line-height:1.0;margin-bottom:14px;letter-spacing:-.5px;}
.hero h1 em{font-style:italic;font-weight:400;-webkit-text-stroke:1.5px var(--gl);color:transparent;}
.hero-sub{font-family:var(--fh);font-size:clamp(15px,1.8vw,20px);font-weight:400;font-style:italic;color:rgba(255,255,255,.38);margin-bottom:16px;}
.hero-desc{font-size:15px;color:rgba(255,255,255,.4);line-height:1.8;margin-bottom:32px;max-width:420px;}
.hero-stats{display:flex;gap:32px;flex-wrap:wrap;}
.hs-n{font-family:var(--fh);font-size:28px;font-weight:600;color:white;}
.hs-l{font-size:11px;color:rgba(255,255,255,.28);margin-top:3px;}
/* SIGNUP CARD */
.signup-card{
  position:relative;z-index:1;
  background:rgba(10,24,20,.75);
  border:1px solid rgba(13,158,133,.2);
  border-radius:20px;
  backdrop-filter:blur(32px);
  -webkit-backdrop-filter:blur(32px);
  overflow:hidden;
  box-shadow:0 40px 100px rgba(0,0,0,.5),0 0 0 1px rgba(255,255,255,.05),inset 0 1px 0 rgba(255,255,255,.07);
}
.signup-card::before{
  content:'';position:absolute;top:-1px;left:10%;right:10%;height:1px;
  background:linear-gradient(90deg,transparent,rgba(13,158,133,.5),transparent);
  pointer-events:none;
}
.stabs{display:grid;grid-template-columns:1fr 1fr;}
.stab{padding:18px 16px;text-align:center;cursor:pointer;border-bottom:2px solid rgba(255,255,255,.06);background:transparent;transition:all .25s;display:flex;flex-direction:column;align-items:center;gap:3px;}
.stab.active{border-bottom-color:var(--gl);background:rgba(13,158,133,.08);}
.stab-title{font-size:13px;font-weight:600;color:rgba(255,255,255,.4);transition:color .25s;}
.stab-desc{font-size:10px;color:rgba(255,255,255,.2);transition:color .25s;letter-spacing:.2px;}
.stab.active .stab-title{color:white;}
.stab.active .stab-desc{color:var(--gl);}
.sform{padding:22px 26px;display:none;max-height:74vh;overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.1) transparent;}
.sform::-webkit-scrollbar{width:3px;}
.sform::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px;}
.sform.active{display:block;}
.sform-title{font-family:var(--fh);font-size:21px;font-weight:600;color:white;margin-bottom:2px;letter-spacing:-.2px;}
.sform-sub{font-size:12px;color:rgba(255,255,255,.3);margin-bottom:18px;}
/* TYPE TOGGLE */
.type-toggle{display:flex;background:rgba(0,0,0,.2);border-radius:8px;padding:3px;gap:3px;margin-bottom:16px;border:1px solid rgba(255,255,255,.06);}
.tt-btn{flex:1;padding:8px 10px;border-radius:6px;border:none;background:transparent;cursor:pointer;transition:all .22s;text-align:center;}
.tt-btn.active{background:rgba(13,158,133,.22);border:1px solid rgba(13,158,133,.28);}
.tt-title{font-size:12px;font-weight:600;color:rgba(255,255,255,.35);transition:color .22s;}
.tt-sub{font-size:10px;color:rgba(255,255,255,.18);margin-top:1px;transition:color .22s;}
.tt-btn.active .tt-title{color:white;}
.tt-btn.active .tt-sub{color:var(--gl);}
/* FIELDS dark */
.fg{margin-bottom:11px;}
.fg label{display:block;font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.28);margin-bottom:4px;}
.fg input,.fg select{width:100%;padding:10px 13px;border:1px solid rgba(255,255,255,.1);border-radius:8px;font-family:var(--fb);font-size:13.5px;color:white;background:rgba(255,255,255,.06);outline:none;transition:all .22s;-webkit-appearance:none;letter-spacing:.1px;}
.fg input::placeholder{color:rgba(255,255,255,.18);}
.fg input:focus,.fg select:focus{border-color:var(--gl);background:rgba(13,158,133,.08);box-shadow:0 0 0 3px rgba(13,158,133,.12),0 2px 8px rgba(0,0,0,.2);}
.fg select option{background:#1a3028;color:white;}
.fg-row{display:grid;grid-template-columns:1fr 1fr;gap:9px;}
.fg-row .fg{margin-bottom:0;}
/* DIVIDER */
.fdiv{height:1px;background:rgba(255,255,255,.06);margin:12px 0;}
/* UPLOAD dark */
.up-sec{margin-bottom:10px;}
.up-label{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.28);display:block;margin-bottom:4px;}
.up-zone{border:1.5px dashed rgba(255,255,255,.1);border-radius:8px;padding:10px 13px;background:rgba(255,255,255,.025);cursor:pointer;transition:all .22s;position:relative;overflow:hidden;display:flex;align-items:center;gap:11px;}
.up-zone:hover{border-color:var(--gl);background:rgba(13,158,133,.06);}
.up-zone.done{border-color:var(--gl);border-style:solid;background:rgba(13,158,133,.09);}
.up-zone input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
.up-icon{width:30px;height:30px;border-radius:6px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;}
.up-zone:hover .up-icon,.up-zone.done .up-icon{border-color:var(--gl);background:rgba(13,158,133,.12);}
.up-icon svg{width:13px;height:13px;stroke:rgba(255,255,255,.35);}
.up-zone.done .up-icon svg{stroke:var(--gl);}
.up-text{flex:1;min-width:0;}
.up-main{font-size:12px;font-weight:500;color:rgba(255,255,255,.5);margin-bottom:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.up-sub{font-size:10px;color:rgba(255,255,255,.18);}
.up-done{font-size:11px;font-weight:600;color:var(--gl);display:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.up-zone.done .up-done{display:block;}
.up-zone.done .up-sub{display:none;}
/* SUBMIT */
.btn-submit{
  width:100%;
  background:linear-gradient(135deg,#0a6e5c 0%,#0d9e85 50%,#0bb897 100%);
  background-size:200% auto;
  color:white;border:none;padding:13px;border-radius:9px;
  font-family:var(--fb);font-size:14px;font-weight:600;
  cursor:pointer;transition:all .3s;margin-top:8px;
  letter-spacing:.3px;text-transform:uppercase;font-size:12px;
  box-shadow:0 4px 20px rgba(13,158,133,.25);
}
.btn-submit:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(13,158,133,.4);background-position:right center;}
.btn-submit:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none;}
.flink{text-align:center;font-size:11px;color:rgba(255,255,255,.22);margin-top:9px;}
.flink a{color:var(--gl);font-weight:600;cursor:pointer;}
/* SALAS */
.rooms-sec{padding:80px 52px;background:var(--w);}
.rooms-inner{max-width:1200px;margin:0 auto;}
.sec-top{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:22px;flex-wrap:wrap;gap:12px;}
.sec-eyebrow{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--g);margin-bottom:5px;}
.sec-title{font-family:var(--fh);font-size:clamp(22px,3vw,34px);font-weight:600;color:var(--ink);letter-spacing:-.3px;}
.btn-refresh{padding:9px 20px;border:1.5px solid var(--bo);border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:500;color:var(--ink);background:transparent;cursor:pointer;transition:all .2s;}
.btn-refresh:hover{border-color:var(--gl);color:var(--g);}
.filters{display:flex;gap:10px;flex-wrap:wrap;padding:14px 18px;background:var(--bg);border:1px solid var(--bo);border-radius:8px;margin-bottom:22px;align-items:flex-end;}
.fg2{display:flex;flex-direction:column;gap:4px;flex:1;min-width:130px;}
.fg2 label{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.7px;color:var(--mu);}
.fg2 select{padding:8px 11px;border:1.5px solid var(--bo);border-radius:6px;font-family:var(--fb);font-size:13px;color:var(--ink);background:white;outline:none;cursor:pointer;-webkit-appearance:none;}
.fg2 select:focus{border-color:var(--gl);}
.btn-buscar{padding:9px 22px;background:var(--g);color:white;border:none;border-radius:6px;font-family:var(--fb);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap;align-self:flex-end;}
.btn-buscar:hover{background:#086649;}
.rooms-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:18px;}
.room-card{background:white;border:1px solid var(--bo);border-radius:12px;overflow:hidden;cursor:pointer;transition:all .25s;box-shadow:0 1px 4px rgba(0,0,0,.05);}
.room-card:hover{transform:translateY(-3px);box-shadow:0 12px 36px rgba(0,0,0,.09);border-color:var(--gl);}
.rc-img{height:168px;background:linear-gradient(135deg,var(--gx),#d0eeea);position:relative;}
.rc-esp{position:absolute;top:10px;left:10px;background:white;border-radius:4px;padding:3px 9px;font-size:10px;font-weight:600;color:var(--g);}
.rc-ver{position:absolute;top:10px;right:10px;background:var(--g);border-radius:4px;padding:3px 9px;font-size:10px;font-weight:600;color:white;}
.rc-body{padding:15px 17px;}
.rc-clin{font-size:10px;font-weight:700;color:var(--g);text-transform:uppercase;letter-spacing:.6px;margin-bottom:3px;}
.rc-name{font-family:var(--fh);font-size:16px;font-weight:600;color:var(--ink);margin-bottom:3px;line-height:1.3;}
.rc-loc{font-size:12px;color:var(--mu);margin-bottom:9px;}
.rc-tags{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:11px;}
.rc-tag{background:var(--bg);border:1px solid var(--bo);border-radius:4px;padding:2px 7px;font-size:10px;color:var(--mu);}
.rc-foot{display:flex;align-items:center;justify-content:space-between;padding-top:11px;border-top:1px solid var(--bg);}
.rc-price{font-family:var(--fh);font-size:22px;font-weight:600;color:var(--g);}
.rc-price span{font-size:12px;color:var(--mu);font-family:var(--fb);font-weight:400;}
.btn-view{padding:7px 15px;background:var(--gx);color:var(--g);border:none;border-radius:6px;font-family:var(--fb);font-size:12px;font-weight:600;cursor:pointer;transition:all .2s;}
.btn-view:hover{background:var(--g);color:white;}
.loading-state{text-align:center;padding:52px;color:var(--mu);}
.spinner{width:26px;height:26px;border:2.5px solid var(--bo);border-top-color:var(--gl);border-radius:50%;animation:spin .7s linear infinite;margin:0 auto 12px;}
@keyframes spin{to{transform:rotate(360deg)}}
/* HOW */
.how{padding:80px 52px;background:var(--bg);}
.how-inner{max-width:1100px;margin:0 auto;}
.how-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;margin-top:36px;}
.hw-card{background:white;border:1px solid var(--bo);border-radius:12px;padding:26px 20px;text-align:center;transition:all .25s;}
.hw-card:hover{transform:translateY(-3px);border-color:var(--gl);box-shadow:0 8px 24px rgba(0,0,0,.06);}
.hw-num{width:36px;height:36px;border-radius:7px;background:var(--gx);color:var(--g);font-family:var(--fh);font-size:17px;font-weight:600;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;}
.hw-card h3{font-family:var(--fh);font-size:16px;font-weight:600;margin-bottom:7px;}
.hw-card p{font-size:13px;color:var(--mu);line-height:1.65;}
/* MODAL */
.modal-ov{position:fixed;inset:0;background:rgba(11,28,24,.65);backdrop-filter:blur(6px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;pointer-events:none;transition:opacity .3s;}
.modal-ov.open{opacity:1;pointer-events:all;}
.modal-box{background:white;border-radius:16px;width:100%;max-width:460px;overflow:hidden;box-shadow:0 24px 80px rgba(0,0,0,.25);transform:translateY(16px);transition:transform .3s;}
.modal-ov.open .modal-box{transform:translateY(0);}
.modal-head{padding:20px 24px 16px;border-bottom:1px solid var(--bo);display:flex;justify-content:space-between;align-items:center;}
.modal-head h2{font-family:var(--fh);font-size:20px;font-weight:600;}
.modal-close{width:28px;height:28px;border-radius:50%;border:1px solid var(--bo);background:transparent;cursor:pointer;font-size:14px;color:var(--mu);display:flex;align-items:center;justify-content:center;}
.modal-close:hover{background:var(--bg);}
.modal-body{padding:22px 24px 28px;}
/* TOAST */
.toast{position:fixed;bottom:24px;right:24px;z-index:9999;background:var(--ink2);color:white;padding:12px 18px;border-radius:8px;font-size:13px;font-weight:500;box-shadow:0 8px 32px rgba(0,0,0,.22);opacity:0;pointer-events:none;transition:opacity .3s;border-left:3px solid var(--gl);}
.toast.show{opacity:1;}
/* FOOTER */
footer{background:#060f0c;padding:52px 52px 0;}
.fi{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;padding-bottom:40px;}
.fb{display:flex;align-items:center;gap:10px;margin-bottom:10px;}
.fb-name{font-family:var(--fh);font-size:18px;font-weight:600;color:white;letter-spacing:-.2px;}
.fdesc{font-size:13px;color:rgba(255,255,255,.28);line-height:1.7;margin-bottom:18px;}
.fq-label{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.22);margin-bottom:8px;}
.fq-row{display:flex;gap:7px;}
.fq-row input{flex:1;padding:8px 11px;border:1px solid rgba(255,255,255,.08);border-radius:6px;font-family:var(--fb);font-size:12px;color:white;background:rgba(255,255,255,.04);outline:none;}
.fq-row input::placeholder{color:rgba(255,255,255,.22);}
.fq-row input:focus{border-color:var(--gl);}
.fq-btn{background:var(--g);color:white;border:none;padding:8px 16px;border-radius:6px;font-family:var(--fb);font-size:12px;font-weight:600;cursor:pointer;}
.fq-btn:hover{background:var(--gl);}
.fcol h4{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.22);margin-bottom:12px;}
.fcol a{display:block;font-size:13px;color:rgba(255,255,255,.38);text-decoration:none;margin-bottom:7px;cursor:pointer;transition:color .2s;}
.fcol a:hover{color:rgba(255,255,255,.8);}
.fbot{max-width:1100px;margin:0 auto;padding:20px 0;border-top:1px solid rgba(255,255,255,.05);display:flex;justify-content:space-between;font-size:12px;color:rgba(255,255,255,.18);}
@media(max-width:960px){
  .nav{padding:0 20px;}
  .hero{grid-template-columns:1fr;padding:82px 20px 52px;text-align:center;}
  .hero-stats{justify-content:center;}
  .rooms-sec,.how{padding:64px 20px;}
  .how-grid{grid-template-columns:1fr 1fr;}
  .fi{grid-template-columns:1fr 1fr;}
  footer{padding:44px 20px 0;}
}
@media(max-width:600px){
  .filters,.fg-row{flex-direction:column;}
  .fg-row{display:flex;}
  .sform{padding:18px 16px;}
}
</style>
</head>
<body>
<nav class="nav">
  <div class="nav-brand" onclick="window.location.href='index.html'">
    <div class="nav-mark">S</div>
    <div class="nav-name">SublocaFacil</div>
  </div>
  <div class="nav-right">
    <button class="btn-ghost" onclick="window.location.href='index.html#loginSec'">Entrar</button>
    <button class="btn-solid" onclick="scrollToSignup()">Criar conta</button>
  </div>
</nav>

<section class="hero">
  <div class="hero-glow"></div>
  <div class="hero-grid"></div>
  <div class="hero-left">
    <div class="hero-kicker"><span class="kicker-line"></span>Tenha na sua mão a gestão completa da sua sala</div>
    <h1>Transforme espaços<br>ociosos em<br><em>faturamento.</em></h1>
    <div class="hero-sub">Do agendamento ao faturamento, tudo em um só lugar.</div>
    <p class="hero-desc">Conectamos clínicas, espaços terapêuticos e coworkings de saúde que desejam aumentar a receita com profissionais que precisam de salas prontas para atender.</p>
    <div class="hero-stats">
      <div><div class="hs-n">200+</div><div class="hs-l">Espaços disponíveis</div></div>
      <div><div class="hs-n">1.800+</div><div class="hs-l">Profissionais ativos</div></div>
      <div><div class="hs-n">15</div><div class="hs-l">Cidades atendidas</div></div>
    </div>
  </div>

  <div class="signup-card" id="signupCard">
    <div class="stabs">
      <div class="stab active" id="tabEsp" onclick="switchTab('esp')">
        <div class="stab-title">Tenho um espaço</div>
        <div class="stab-desc">Quero anunciar e sublocar</div>
      </div>
      <div class="stab" id="tabPro" onclick="switchTab('pro')">
        <div class="stab-title">Sou profissional</div>
        <div class="stab-desc">Quero sublocar um espaço</div>
      </div>
    </div>

    <div class="sform active" id="formEsp">
      <div class="sform-title">Cadastrar meu espaço</div>
      <div class="sform-sub">Preencha os dados para anunciar suas salas</div>
      <div class="type-toggle">
        <div class="tt-btn active" id="tipoPJ" onclick="switchTipo('PJ')">
          <div class="tt-title">Pessoa Jurídica</div>
          <div class="tt-sub">CNPJ da empresa</div>
        </div>
        <div class="tt-btn" id="tipoPF" onclick="switchTipo('PF')">
          <div class="tt-title">Pessoa Física</div>
          <div class="tt-sub">CPF do responsável</div>
        </div>
      </div>
      <div class="fg"><label>Nome do espaço / clínica</label><input type="text" id="e_nome" placeholder="Ex: Clínica Bem Estar"/></div>
      <div class="fg-row">
        <div class="fg"><label>Responsável</label><input type="text" id="e_resp" placeholder="Nome completo"/></div>
        <div class="fg"><label>WhatsApp</label><input type="text" id="e_tel" placeholder="(11) 99999-9999"/></div>
      </div>
      <div class="fg"><label>E-mail</label><input type="email" id="e_email" placeholder="contato@espaco.com"/></div>
      <div class="fg-row">
        <div class="fg"><label>Senha</label><input type="password" id="e_senha" placeholder="Mínimo 8 caracteres"/></div>
        <div class="fg"><label id="docLabel">CNPJ</label><input type="text" id="e_doc" placeholder="00.000.000/0001-00"/></div>
      </div>
      <div class="fdiv"></div>
      <div class="up-sec">
        <div class="up-label" id="upLabel1">Contrato social (PJ) ou RG/CNH (PF)</div>
        <div class="up-zone" id="uz1">
          <input type="file" id="e_f1" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('e_f1','uz1','uzd1')"/>
          <div class="up-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div>
          <div class="up-text"><div class="up-main">Clique para selecionar ou arraste</div><div class="up-sub">PDF, JPG ou PNG — máx. 10 MB</div><div class="up-done" id="uzd1"></div></div>
        </div>
      </div>
      <div class="up-sec">
        <div class="up-label">Documento com foto do responsável (RG ou CNH)</div>
        <div class="up-zone" id="uz2">
          <input type="file" id="e_f2" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('e_f2','uz2','uzd2')"/>
          <div class="up-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="14" rx="2"/><circle cx="9" cy="10" r="2"/><path d="m21 15-3.5-3.5L13 16"/></svg></div>
          <div class="up-text"><div class="up-main">Clique para selecionar ou arraste</div><div class="up-sub">PDF, JPG ou PNG — máx. 10 MB</div><div class="up-done" id="uzd2"></div></div>
        </div>
      </div>
      <div class="up-sec">
        <div class="up-label">Comprovante de endereço do espaço</div>
        <div class="up-zone" id="uz3">
          <input type="file" id="e_f3" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('e_f3','uz3','uzd3')"/>
          <div class="up-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
          <div class="up-text"><div class="up-main">Conta de luz, água ou IPTU</div><div class="up-sub">PDF, JPG ou PNG — máx. 10 MB</div><div class="up-done" id="uzd3"></div></div>
        </div>
      </div>
      <button class="btn-submit" id="btnEsp" onclick="cadastrarEspaco()">Cadastrar meu espaço</button>
      <div class="flink">Já tem conta? <a onclick="window.location.href='index.html#loginSec'">Acessar painel</a></div>
    </div>

    <div class="sform" id="formPro">
      <div class="sform-title">Cadastro profissional</div>
      <div class="sform-sub">Acesse espaços clínicos verificados em todo o Brasil</div>
      <div class="fg"><label>Nome completo</label><input type="text" id="p_nome" placeholder="Nome e sobrenome"/></div>
      <div class="fg-row">
        <div class="fg"><label>E-mail</label><input type="email" id="p_email" placeholder="seu@email.com"/></div>
        <div class="fg"><label>WhatsApp</label><input type="text" id="p_tel" placeholder="(11) 99999-9999"/></div>
      </div>
      <div class="fg"><label>Senha</label><input type="password" id="p_senha" placeholder="Mínimo 8 caracteres"/></div>
      <div class="fg-row">
        <div class="fg">
          <label>Conselho profissional</label>
          <select id="p_conselho">
            <option value="">Selecione</option>
            <option value="CRP">CRP — Psicologia</option>
            <option value="CRM">CRM — Medicina</option>
            <option value="CRN">CRN — Nutrição</option>
            <option value="CREFITO">CREFITO — Fisioterapia</option>
            <option value="CFFa">CFFa — Fonoaudiologia</option>
            <option value="CRO">CRO — Odontologia</option>
            <option value="COREN">COREN — Enfermagem</option>
            <option value="CFF">CFF — Farmácia</option>
            <option value="CFMV">CFMV — Med. Veterinária</option>
            <option value="outro">Outro conselho</option>
          </select>
        </div>
        <div class="fg"><label>Número de registro</label><input type="text" id="p_reg" placeholder="Ex: 06/123456"/></div>
      </div>
      <div class="fg"><label>CPF</label><input type="text" id="p_cpf" placeholder="000.000.000-00"/></div>
      <div class="fdiv"></div>
      <div class="up-sec">
        <div class="up-label">Documento com foto (RG ou CNH)</div>
        <div class="up-zone" id="puz1">
          <input type="file" id="p_f1" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('p_f1','puz1','puzd1')"/>
          <div class="up-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="14" rx="2"/><circle cx="9" cy="10" r="2"/><path d="m21 15-3.5-3.5L13 16"/></svg></div>
          <div class="up-text"><div class="up-main">Clique para selecionar ou arraste</div><div class="up-sub">PDF, JPG ou PNG — máx. 10 MB</div><div class="up-done" id="puzd1"></div></div>
        </div>
      </div>
      <div class="up-sec">
        <div class="up-label">Comprovante de registro no conselho</div>
        <div class="up-zone" id="puz2">
          <input type="file" id="p_f2" accept=".pdf,.jpg,.jpeg,.png" onchange="handleUpload('p_f2','puz2','puzd2')"/>
          <div class="up-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg></div>
          <div class="up-text"><div class="up-main">Carteirinha, certidão ou comprovante</div><div class="up-sub">PDF, JPG ou PNG — máx. 10 MB</div><div class="up-done" id="puzd2"></div></div>
        </div>
      </div>
      <button class="btn-submit" id="btnPro" onclick="cadastrarProfissional()">Criar minha conta</button>
      <div class="flink">Já tem conta? <a onclick="window.location.href='index.html#loginSec'">Acessar painel</a></div>
    </div>
  </div>
</section>

<section class="rooms-sec" id="salas">
  <div class="rooms-inner">
    <div class="sec-top">
      <div>
        <div class="sec-eyebrow">SublocaFacil.com.br</div>
        <div class="sec-title">Espaços disponíveis</div>
      </div>
      <button class="btn-refresh" onclick="loadRooms()">Atualizar listagem</button>
    </div>
    <div class="filters">
      <div class="fg2"><label>Estado</label><select id="fEst" onchange="loadCities()"><option value="">Todos os estados</option><option value="SP">São Paulo</option><option value="RJ">Rio de Janeiro</option><option value="MG">Minas Gerais</option><option value="PR">Paraná</option><option value="RS">Rio Grande do Sul</option><option value="SC">Santa Catarina</option><option value="BA">Bahia</option><option value="DF">Distrito Federal</option></select></div>
      <div class="fg2"><label>Município</label><select id="fCid"><option value="">Todos os municípios</option></select></div>
      <div class="fg2"><label>Especialidade</label><select id="fEsp2"><option value="">Todas</option><option value="Psicologia">Psicologia</option><option value="Medicina">Medicina</option><option value="Nutrição">Nutrição</option><option value="Fisioterapia">Fisioterapia</option><option value="Odontologia">Odontologia</option><option value="Multiuso">Multiuso</option></select></div>
      <div class="fg2"><label>Valor máx. / sessão</label><select id="fVal"><option value="">Qualquer valor</option><option value="50">Até R$ 50</option><option value="100">Até R$ 100</option><option value="150">Até R$ 150</option></select></div>
      <button class="btn-buscar" onclick="applyFilters()">Buscar</button>
    </div>
    <div id="roomsGrid"><div class="loading-state"><div class="spinner"></div>Carregando espaços...</div></div>
  </div>
</section>

<section class="how">
  <div class="how-inner">
    <div style="text-align:center"><div class="sec-eyebrow">Processo simples</div><div class="sec-title">Como funciona</div></div>
    <div class="how-grid">
      <div class="hw-card"><div class="hw-num">1</div><h3>Cadastro verificado</h3><p>Envie seus documentos e registro profissional. Nossa equipe valida em até 24 horas.</p></div>
      <div class="hw-card"><div class="hw-num">2</div><h3>Encontre o espaço</h3><p>Filtre por cidade, especialidade e valor. Veja disponibilidade em tempo real.</p></div>
      <div class="hw-card"><div class="hw-num">3</div><h3>Assine o contrato</h3><p>Contrato digital gerado automaticamente com validade jurídica. Sem papel.</p></div>
      <div class="hw-card"><div class="hw-num">4</div><h3>Comece a atender</h3><p>Gerencie reservas e pagamentos em um único painel. Simples e ágil.</p></div>
    </div>
  </div>
</section>

<div class="modal-ov" id="modalOv">
  <div class="modal-box">
    <div class="modal-head"><h2 id="mTitle">Cadastro recebido</h2><button class="modal-close" onclick="closeModal()">&#10005;</button></div>
    <div class="modal-body" id="mBody"></div>
  </div>
</div>

<footer>
  <div class="fi">
    <div>
      <div class="fb"><div class="nav-mark">S</div><div class="fb-name">SublocaFacil</div></div>
      <div class="fdesc">A plataforma que conecta espaços ociosos a profissionais de saúde. Simples, seguro e profissional.</div>
      <div class="fq-label">Acesso rápido</div>
      <div class="fq-row"><input type="email" id="fEmail" placeholder="E-mail"/><input type="password" id="fSenha" placeholder="Senha"/><button class="fq-btn" onclick="footerLogin()">Entrar</button></div>
    </div>
    <div class="fcol"><h4>Plataforma</h4><a href="#salas">Ver espaços</a><a onclick="switchTab('pro');scrollToSignup()">Sou profissional</a><a onclick="switchTab('esp');scrollToSignup()">Anunciar espaço</a><a href="index.html">Página inicial</a></div>
    <div class="fcol"><h4>Suporte</h4><a>Central de ajuda</a><a>Fale conosco</a></div>
    <div class="fcol"><h4>Legal</h4><a>Termos de uso</a><a>Privacidade</a><a>LGPD</a></div>
  </div>
  <div class="fbot"><span>© 2026 SublocaFacil — Todos os direitos reservados</span><span>Plataforma verificada · Segura · Profissional</span></div>
</footer>
<div class="toast" id="toast"></div>

<script>
const CITIES={SP:['São Paulo','Campinas','Santos','Guarulhos','Osasco','Ribeirão Preto'],RJ:['Rio de Janeiro','Niterói','São Gonçalo','Duque de Caxias'],MG:['Belo Horizonte','Uberlândia','Contagem','Juiz de Fora'],PR:['Curitiba','Londrina','Maringá','Ponta Grossa'],RS:['Porto Alegre','Caxias do Sul','Pelotas','Canoas'],SC:['Florianópolis','Joinville','Blumenau','São José'],BA:['Salvador','Feira de Santana'],DF:['Brasília','Taguatinga']};
const DEMOS=[{id:'s1',clinica:'Clínica Esperança',nome:'Sala de Acolhimento',cidade:'São Paulo',estado:'SP',bairro:'Vila Mariana',valor:31.90,esp:'Psicologia',hI:'08:00',hF:'21:00',dias:'Seg–Sex'},{id:'s2',clinica:'Instituto Integra',nome:'Consultório Médico',cidade:'São Paulo',estado:'SP',bairro:'Pinheiros',valor:55.00,esp:'Medicina',hI:'09:00',hF:'20:00',dias:'Seg–Sex'},{id:'s3',clinica:'Espaço Saúde+',nome:'Sala Multiuso',cidade:'Campinas',estado:'SP',bairro:'Cambuí',valor:28.00,esp:'Multiuso',hI:'08:00',hF:'18:00',dias:'Ter e Qui'},{id:'s4',clinica:'Clínica Viver',nome:'Consultório de Fisioterapia',cidade:'Curitiba',estado:'PR',bairro:'Batel',valor:38.00,esp:'Fisioterapia',hI:'08:00',hF:'22:00',dias:'Seg–Sex'},{id:'s5',clinica:'Centro Saúde Sul',nome:'Sala Terapêutica',cidade:'Porto Alegre',estado:'RS',bairro:'Moinhos de Vento',valor:42.00,esp:'Psicologia',hI:'09:00',hF:'20:00',dias:'Seg–Sex'},{id:'s6',clinica:'Nutri Rio',nome:'Consultório de Nutrição',cidade:'Rio de Janeiro',estado:'RJ',bairro:'Ipanema',valor:48.00,esp:'Nutrição',hI:'08:00',hF:'21:00',dias:'Seg–Sex'}];
let tipoPessoa='PJ';
function toast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3500);}
function scrollToSignup(){document.getElementById('signupCard').scrollIntoView({behavior:'smooth',block:'center'});}
function switchTab(tab){['Esp','Pro'].forEach(k=>{document.getElementById('tab'+k).classList.remove('active');document.getElementById('form'+k).classList.remove('active');});const k=tab==='esp'?'Esp':'Pro';document.getElementById('tab'+k).classList.add('active');document.getElementById('form'+k).classList.add('active');}
function switchTipo(t){tipoPessoa=t;document.getElementById('tipoPJ').classList.toggle('active',t==='PJ');document.getElementById('tipoPF').classList.toggle('active',t==='PF');document.getElementById('docLabel').textContent=t==='PJ'?'CNPJ':'CPF';document.getElementById('e_doc').placeholder=t==='PJ'?'00.000.000/0001-00':'000.000.000-00';document.getElementById('upLabel1').textContent=t==='PJ'?'Contrato social da empresa':'RG ou CNH do responsável';}
function handleUpload(inputId,zoneId,doneId){const f=document.getElementById(inputId).files[0];if(!f)return;document.getElementById(zoneId).classList.add('done');document.getElementById(doneId).textContent=f.name;}
function loadCities(){const e=document.getElementById('fEst').value;const s=document.getElementById('fCid');s.innerHTML='<option value="">Todos os municípios</option>';(CITIES[e]||[]).forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;s.appendChild(o);});}
function applyFilters(){const e=document.getElementById('fEst').value;const c=document.getElementById('fCid').value;const esp=document.getElementById('fEsp2').value;const v=parseFloat(document.getElementById('fVal').value)||Infinity;let r=[...DEMOS];if(e)r=r.filter(s=>s.estado===e);if(c)r=r.filter(s=>s.cidade===c);if(esp)r=r.filter(s=>s.esp===esp);r=r.filter(s=>s.valor<=v);renderRooms(r);}
function loadRooms(){renderRooms(DEMOS);}
function renderRooms(list){if(!list.length){document.getElementById('roomsGrid').innerHTML='<div class="loading-state" style="opacity:.5">Nenhum espaço encontrado.</div>';return;}document.getElementById('roomsGrid').innerHTML='<div class="rooms-grid">'+list.map(s=>`<div class="room-card" onclick="window.location.href='sala-detalhe.html?id=${s.id}'"><div class="rc-img"><div class="rc-esp">${s.esp}</div><div class="rc-ver">Verificado</div></div><div class="rc-body"><div class="rc-clin">${s.clinica}</div><div class="rc-name">${s.nome}</div><div class="rc-loc">${s.bairro} · ${s.cidade}, ${s.estado}</div><div class="rc-tags"><span class="rc-tag">${s.dias}</span><span class="rc-tag">${s.hI} – ${s.hF}</span></div><div class="rc-foot"><div class="rc-price">R$ ${s.valor.toFixed(2)}<span> / sessão</span></div><button class="btn-view">Ver espaço</button></div></div></div>`).join('')+'</div>';}

async function cadastrarEspaco(){
  const n=document.getElementById('e_nome').value.trim(),resp=document.getElementById('e_resp').value.trim(),em=document.getElementById('e_email').value.trim(),s=document.getElementById('e_senha').value,d=document.getElementById('e_doc').value.trim(),f1=document.getElementById('e_f1').files[0],f2=document.getElementById('e_f2').files[0],f3=document.getElementById('e_f3').files[0];
  if(!n||!resp||!em||!s||!d){toast('Preencha todos os campos obrigatórios');return;}
  if(s.length<8){toast('Senha mínimo 8 caracteres');return;}
  if(!f1||!f2||!f3){toast('Envie todos os documentos obrigatórios');return;}
  const btn=document.getElementById('btnEsp');btn.disabled=true;btn.textContent='Enviando...';
  try{
    const db=getSupabase();
    // Inserir direto — tratar duplicidade pelo código de erro do Supabase
    const{data:cl,error:insertErr}=await db.from('clinicas').insert({
      nome:n,proprietaria:resp,email:em,
      plano:'profissional',status:'pendente_aprovacao',
      whatsapp:document.getElementById('e_tel').value,
      cnpj:tipoPessoa==='PJ'?d:null,cpf:tipoPessoa==='PF'?d:null
    }).select().single();
    if(insertErr){
      // Código 23505 = unique_violation (email duplicado no Postgres/Supabase)
      if(insertErr.code==='23505'||insertErr.message?.toLowerCase().includes('duplicate')||insertErr.message?.toLowerCase().includes('unique')){
        toast('E-mail já cadastrado. Acesse seu painel.');
      } else {
        toast('Erro: '+(insertErr.message||'tente novamente'));
      }
      btn.disabled=false;btn.textContent='Cadastrar meu espaço';return;
    }
    // Upload documentos (não bloqueia cadastro se bucket ainda não existe)
    try{
      await Promise.all([
        db.storage.from('documentos').upload('clinicas/'+cl.id+'/doc_social',f1,{upsert:true}),
        db.storage.from('documentos').upload('clinicas/'+cl.id+'/doc_foto',f2,{upsert:true}),
        db.storage.from('documentos').upload('clinicas/'+cl.id+'/doc_end',f3,{upsert:true}),
      ]);
    }catch(uploadErr){console.warn('Upload docs (criar bucket "documentos" no Supabase):',uploadErr);}
    await db.from('usuarios').insert({clinica_id:cl.id,nome:resp,email:em,senha_hash:btoa(s),role:'admin'});
    try{await db.from('config_clinica').insert({clinica_id:cl.id});}catch(_){}
    openSuccessModal('esp',resp.split(' ')[0],em);
  }catch(err){
    console.error('Cadastro espaço erro:',err);
    toast(err.message||'Erro inesperado. Tente novamente.');
    btn.disabled=false;btn.textContent='Cadastrar meu espaço';
  }
}

async function cadastrarProfissional(){
  const n=document.getElementById('p_nome').value.trim(),em=document.getElementById('p_email').value.trim(),s=document.getElementById('p_senha').value,cons=document.getElementById('p_conselho').value,reg=document.getElementById('p_reg').value.trim(),cpf=document.getElementById('p_cpf').value.trim(),f1=document.getElementById('p_f1').files[0],f2=document.getElementById('p_f2').files[0];
  if(!n||!em||!s||!cons||!reg||!cpf){toast('Preencha todos os campos obrigatórios');return;}
  if(s.length<8){toast('Senha mínimo 8 caracteres');return;}
  if(!f1||!f2){toast('Envie os documentos obrigatórios');return;}
  const btn=document.getElementById('btnPro');btn.disabled=true;btn.textContent='Enviando...';
  try{
    const db=getSupabase();
    const{data:p,error:insertErr}=await db.from('psicologas').insert({
      nome:n,email:em,cpf,crp:reg,
      tipo_sub:'avulso',status:'pendente_aprovacao',
      telefone:document.getElementById('p_tel').value,clinica_id:null
    }).select().single();
    if(insertErr){
      if(insertErr.code==='23505'||insertErr.message?.toLowerCase().includes('duplicate')||insertErr.message?.toLowerCase().includes('unique')){
        toast('E-mail já cadastrado. Acesse seu painel.');
      } else {
        toast('Erro: '+(insertErr.message||'tente novamente'));
      }
      btn.disabled=false;btn.textContent='Criar minha conta';return;
    }
    try{
      await Promise.all([
        db.storage.from('documentos').upload('profissionais/'+p.id+'/doc_foto',f1,{upsert:true}),
        db.storage.from('documentos').upload('profissionais/'+p.id+'/doc_reg',f2,{upsert:true}),
      ]);
    }catch(uploadErr){console.warn('Upload docs (criar bucket "documentos" no Supabase):',uploadErr);}
    localStorage.setItem('hope_psi_logada',JSON.stringify({id:p.id,nome:n,email:em,crp:reg,conselho:cons,status:'pendente_aprovacao'}));
    openSuccessModal('pro',n.split(' ')[0],em);
  }catch(err){
    console.error('Cadastro prof erro:',err);
    toast(err.message||'Erro inesperado. Tente novamente.');
    btn.disabled=false;btn.textContent='Criar minha conta';
  }
}

function openSuccessModal(tipo,nome,email){
  const isEsp=tipo==='esp';
  document.getElementById('mTitle').textContent=isEsp?'Espaço cadastrado!':'Cadastro realizado!';
  document.getElementById('mBody').innerHTML=`<div style="text-align:center"><div style="width:52px;height:52px;border-radius:50%;background:var(--gx);border:2px solid rgba(10,110,92,.2);display:flex;align-items:center;justify-content:center;margin:0 auto 16px"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--g)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div><div style="font-family:var(--fh);font-size:22px;font-weight:600;margin-bottom:8px">Olá, ${nome}!</div><div style="font-size:14px;color:var(--mu);line-height:1.7;margin-bottom:16px">Seu cadastro foi recebido. Nossa equipe verificará seus documentos em até <strong>24 horas úteis</strong>.</div><div style="background:var(--gx);border:1px solid rgba(13,158,133,.2);border-radius:8px;padding:13px 16px;font-size:13px;line-height:1.8;text-align:left;margin-bottom:18px">Confirmação para <strong>${email}</strong><br>${isEsp?'Após aprovação, cadastre suas salas no painel':'Após aprovação, você poderá reservar espaços'}</div><button class="btn-submit" onclick="closeModal()" style="background:linear-gradient(135deg,var(--g),var(--gl));color:white;border:none;padding:12px;border-radius:8px;width:100%;font-family:var(--fb);font-size:14px;font-weight:600;cursor:pointer">Entendido</button></div>`;
  document.getElementById('modalOv').classList.add('open');
}
function closeModal(){document.getElementById('modalOv').classList.remove('open');}
function footerLogin(){const e=document.getElementById('fEmail').value.trim(),s=document.getElementById('fSenha').value;if(!e||!s){toast('Preencha e-mail e senha');return;}window.location.href='painel-psi.html';}
document.addEventListener('DOMContentLoaded',loadRooms);
</script>
</body>
</html>