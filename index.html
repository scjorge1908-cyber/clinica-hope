<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cl√≠nica Hope ‚Äî Gest√£o de Subloca√ß√£o</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase.js"></script>

  <style>
  /* ‚îÄ‚îÄ PROFISSIONAIS ‚Äî Redesign ‚îÄ‚îÄ */
  :root {
    --midnight: #1e293b;
    --teal: #0d9488;
    --teal-light: #f0fdfa;
    --warm-50: #fafaf9;
    --warm-100: #f5f5f4;
    --warm-200: #e7e5e0;
    --slate-400: #94a3b8;
    --slate-600: #475569;
  }

  /* Cards de profissionais */
  .psi-card {
    background: white;
    border-radius: 16px;
    border: 1px solid var(--warm-200);
    overflow: hidden;
    transition: transform .22s cubic-bezier(.34,1.56,.64,1), box-shadow .22s ease;
    position: relative;
  }
  .psi-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 16px 40px rgba(0,0,0,.09);
  }
  .psi-card-header {
    padding: 20px 20px 0;
    display: flex;
    align-items: flex-start;
    gap: 14px;
  }
  .psi-avatar {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 700;
    color: white;
    flex-shrink: 0;
    letter-spacing: -.5px;
  }
  .psi-card-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--midnight);
    margin: 0 0 3px;
    line-height: 1.2;
  }
  .psi-card-reg {
    font-size: 12px;
    color: var(--slate-400);
    font-weight: 500;
  }
  .psi-badge {
    position: absolute;
    top: 14px;
    right: 14px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .08em;
    padding: 3px 8px;
    border-radius: 20px;
  }
  .psi-badge-avulso { background: #fef3c7; color: #92400e; }
  .psi-badge-semanal { background: #d1fae5; color: #065f46; }
  .psi-badge-quinzenal { background: #dbeafe; color: #1e40af; }
  .psi-badge-mensal { background: #ede9fe; color: #5b21b6; }

  .psi-card-body {
    padding: 14px 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .psi-info-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--slate-600);
  }
  .psi-info-row svg { flex-shrink: 0; opacity: .6; }
  .psi-info-row strong { color: var(--midnight); font-weight: 600; }

  .psi-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    padding: 12px 20px;
    background: var(--warm-50);
    border-top: 1px solid var(--warm-200);
    border-bottom: 1px solid var(--warm-200);
    margin: 0;
  }
  .psi-stat { text-align: center; }
  .psi-stat-val { font-size: 17px; font-weight: 800; color: var(--midnight); }
  .psi-stat-label { font-size: 11px; color: var(--slate-400); font-weight: 500; margin-top: 2px; }

  .psi-card-actions {
    padding: 12px 20px;
    display: flex;
    gap: 8px;
  }
  .psi-btn-edit {
    flex: 1;
    padding: 8px;
    border: 1px solid var(--warm-200);
    border-radius: 8px;
    background: white;
    font-size: 13px;
    font-weight: 600;
    color: var(--midnight);
    cursor: pointer;
    transition: all .15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .psi-btn-edit:hover { background: var(--warm-100); }
  .psi-btn-cobrar {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 8px;
    background: var(--teal);
    font-size: 13px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: all .15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .psi-btn-cobrar:hover { background: #0f766e; transform: translateY(-1px); }
  .psi-btn-del {
    padding: 8px 10px;
    border: 1px solid #fee2e2;
    border-radius: 8px;
    background: white;
    color: #ef4444;
    cursor: pointer;
    transition: all .15s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .psi-btn-del:hover { background: #fef2f2; }

  /* FAB Mobile */
  .psi-fab {
    display: none;
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--teal);
    color: white;
    border: none;
    cursor: pointer;
    box-shadow: 0 8px 24px rgba(13,148,136,.4);
    align-items: center;
    justify-content: center;
    z-index: 100;
    transition: transform .2s;
  }
  .psi-fab:hover { transform: scale(1.08); }

  /* Steps no modal reserva */
  #rPasso1, #rPasso2, #rPasso3 { animation: fadeIn .2s ease; }
  @keyframes fadeIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }

  /* Sidebar nav item psicologas update */
  #navPsicologas { }

  @media (max-width: 768px) {
    .psi-fab { display: flex; }
    .psi-btn-desktop { display: none !important; }
  }
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LOGIN / CADASTRO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="authScreen" class="auth-screen">
  <div class="auth-left">
    <div class="auth-brand">
      <span class="brand-mark">H</span>
      <span class="brand-name">Cl√≠nica Hope</span>
    </div>
    <h1 class="auth-headline">Gest√£o de<br><em>Subloca√ß√£o</em><br>sem planilhas.</h1>
    <p class="auth-sub">Salas, psic√≥logas, agendamentos e pagamentos ‚Äî tudo em um lugar s√≥.</p>
    <div class="auth-features">
      <div class="feat">‚ú¶ Painel de salas em tempo real</div>
      <div class="feat">‚ú¶ Cobran√ßa autom√°tica via Mercado Pago</div>
      <div class="feat">‚ú¶ Relat√≥rios gerenciais completos</div>
      <div class="feat">‚ú¶ Multi-cl√≠nica, dados isolados</div>
    </div>
  </div>

  <div class="auth-right">
    <div class="auth-card">
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="switchTab('login')">Entrar</button>
        <button class="auth-tab" onclick="switchTab('register')">Criar conta</button>
      </div>

      <!-- LOGIN -->
      <div id="tabLogin" class="auth-form active">
        <h2>Bem-vindo de volta</h2>
        <p class="form-hint">Acesse o painel da sua cl√≠nica</p>
        <div class="field">
          <label>E-mail</label>
          <input type="email" id="loginEmail" placeholder="seuemail@clinica.com" />
        </div>
        <div class="field">
          <label>Senha</label>
          <input type="password" id="loginPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
        </div>
        <button class="btn-primary full" onclick="doLogin()">Entrar no painel</button>
        <p class="form-hint center"><a href="#" onclick="forgotPass()">Esqueci minha senha</a></p>
      </div>

      <!-- REGISTRO -->
      <div id="tabRegister" class="auth-form">
        <h2>Criar sua conta</h2>
        <p class="form-hint">Comece gratuitamente por 14 dias</p>
        <div class="field">
          <label>Nome da cl√≠nica</label>
          <input type="text" id="regClinica" placeholder="Cl√≠nica Esperan√ßa Ltda" />
        </div>
        <div class="field">
          <label>Seu nome</label>
          <input type="text" id="regNome" placeholder="Dra. Ana Lima" />
        </div>
        <div class="field">
          <label>E-mail</label>
          <input type="email" id="regEmail" placeholder="seuemail@clinica.com" />
        </div>
        <div class="field">
          <label>Senha</label>
          <input type="password" id="regPass" placeholder="M√≠n. 8 caracteres" />
        </div>
        <button class="btn-primary full" onclick="doRegister()">Criar conta gr√°tis</button>
        <p class="form-hint center">Ao criar, voc√™ concorda com os <a href="#">termos de uso</a></p>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     APP PRINCIPAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="appScreen" class="app-screen hidden">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-brand">
      <span class="brand-mark">H</span>
      <div>
        <div class="sidebar-clinic-name" id="sideClinicName">Cl√≠nica Hope</div>
        <div class="sidebar-plan">Plano Profissional</div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a href="#" class="nav-item active" onclick="goTo('painel')">
        <span class="nav-icon">‚¨°</span> Painel de Salas
      </a>
      <a href="#" class="nav-item" onclick="goTo('salas')">
        <span class="nav-icon">‚¨õ</span> Salas
      </a>
      <a href="#" class="nav-item" onclick="goTo('psicologas')">
        <span class="nav-icon">‚óé</span> Profissionais
      </a>
      <a href="#" class="nav-item" onclick="goTo('agendamentos')">
        <span class="nav-icon">‚óà</span> Agendamentos
      </a>
      <a href="#" class="nav-item" onclick="goTo('financeiro')">
        <span class="nav-icon">‚óá</span> Financeiro
      </a>
      <a href="#" class="nav-item" onclick="goTo('relatorios')">
        <span class="nav-icon">‚äû</span> Relat√≥rios
      </a>
    </nav>

    <div class="sidebar-bottom">
      <a href="#" class="nav-item" onclick="goTo('config')">
        <span class="nav-icon">‚öô</span> Configura√ß√µes
      </a>
      <a href="#" class="nav-item" onclick="doLogout()">
        <span class="nav-icon">‚Üí</span> Sair
      </a>
    </div>
  </aside>

  <!-- CONTE√öDO PRINCIPAL -->
  <main class="main-content">

    <!-- ‚îÄ‚îÄ PAINEL DE SALAS ‚îÄ‚îÄ -->
    <section id="pagePainel" class="page active">
      <div class="page-header">
        <div>
          <h2 class="page-title">Painel de Salas</h2>
          <p class="page-sub">Vis√£o geral de ocupa√ß√£o em tempo real</p>
        </div>
        <div class="header-actions">
          <select id="painelFiltroTurno" onchange="renderPainel()" class="select-sm">
            <option value="">Todos os turnos</option>
            <option value="manha">Manh√£</option>
            <option value="tarde">Tarde</option>
            <option value="noite">Noite</option>
          </select>
          <select id="painelFiltroDia" onchange="renderPainel()" class="select-sm">
            <option value="">Todos os dias</option>
            <option value="segunda">Segunda</option>
            <option value="terca">Ter√ßa</option>
            <option value="quarta">Quarta</option>
            <option value="quinta">Quinta</option>
            <option value="sexta">Sexta</option>
          </select>
          <button class="btn-primary" onclick="exportPainelPDF()">‚Üì PDF Disponibilidade</button>
        </div>
      </div>

      <div class="stats-row" id="statsRow"></div>
      <div class="painel-wrap" id="painelWrap"></div>
    </section>

    <!-- ‚îÄ‚îÄ SALAS ‚îÄ‚îÄ -->
    <section id="pageSalas" class="page hidden">
      <div class="page-header">
        <div>
          <h2 class="page-title">Salas</h2>
          <p class="page-sub">Cadastre e gerencie as salas da cl√≠nica</p>
        </div>
        <button class="btn-primary" onclick="openModal('modalSala')">+ Nova Sala</button>
      </div>
      <div class="cards-grid" id="salasGrid"></div>
    </section>

    <!-- ‚îÄ‚îÄ PROFISSIONAIS ‚îÄ‚îÄ -->
    <section id="pagePsicologas" class="page hidden">
      <div class="page-header" style="flex-wrap:wrap;gap:16px;">
        <div>
          <h2 class="page-title">Profissionais</h2>
          <p class="page-sub">Sublocat√°rios com contratos ativos</p>
        </div>
        <div style="display:flex;align-items:center;gap:8px;background:#f8f7f5;border:1px solid #e5e2dc;border-radius:12px;padding:8px 16px;flex:1;max-width:480px;">
          <svg width="16" height="16" fill="none" stroke="#94a3b8" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
          <input id="psiSearch" type="text" placeholder="Buscar profissional..." oninput="renderPsis()"
            style="border:none;background:transparent;outline:none;font-size:14px;color:#1e293b;width:100%;font-family:inherit;" />
          <select id="psiFiltroTipo" onchange="renderPsis()"
            style="border:none;background:transparent;outline:none;font-size:13px;color:#64748b;font-family:inherit;cursor:pointer;">
            <option value="">Todos</option>
            <option value="avulso">Avulso</option>
            <option value="semanal">Semanal</option>
            <option value="quinzenal">Quinzenal</option>
            <option value="mensal">Mensal</option>
          </select>
        </div>
        <button class="btn-primary" onclick="openNovaReserva()" style="display:flex;align-items:center;gap:8px;">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
          Nova Reserva
        </button>
      </div>
      <div id="psiGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-top:8px;"></div>
      <div id="psiEmpty" style="display:none;text-align:center;padding:64px 24px;">
        <div style="width:56px;height:56px;border-radius:16px;background:#f1f5f9;display:inline-flex;align-items:center;justify-content:center;margin-bottom:16px;">
          <svg width="24" height="24" fill="none" stroke="#94a3b8" stroke-width="1.5" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
        </div>
        <p style="font-size:15px;font-weight:600;color:#1e293b;margin:0 0 6px;">Nenhum profissional encontrado</p>
        <p style="font-size:13px;color:#94a3b8;margin:0 0 20px;">Adicione uma nova reserva para comecar</p>
        <button class="btn-primary" onclick="openNovaReserva()">+ Nova Reserva</button>
      </div>
      <button onclick="openNovaReserva()" class="psi-fab" title="Nova Reserva">
        <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
      </button>
    </section>

    <!-- ‚îÄ‚îÄ AGENDAMENTOS ‚îÄ‚îÄ -->
    <section id="pageAgendamentos" class="page hidden">
      <div class="page-header">
        <div>
          <h2 class="page-title">Agendamentos</h2>
          <p class="page-sub">Controle de uso das salas</p>
        </div>
        <button class="btn-primary" onclick="openModal('modalAgend')">+ Novo Agendamento</button>
      </div>
      <div class="filter-bar">
        <select id="agendFiltroSala" onchange="renderAgendamentos()" class="select-sm">
          <option value="">Todas as salas</option>
        </select>
        <select id="agendFiltroPsi" onchange="renderAgendamentos()" class="select-sm">
          <option value="">Todas as psic√≥logas</option>
        </select>
        <select id="agendFiltroStatus" onchange="renderAgendamentos()" class="select-sm">
          <option value="">Todos os status</option>
          <option value="agendado">Agendado</option>
          <option value="confirmado">Confirmado</option>
          <option value="cancelado">Cancelado</option>
        </select>
      </div>
      <div class="table-card">
        <table class="data-table" id="agendTable">
          <thead>
            <tr>
              <th>Paciente</th><th>Psic√≥loga</th><th>Sala</th>
              <th>Data</th><th>Hor√°rio</th><th>Valor</th><th>Status</th><th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="agendBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ FINANCEIRO ‚îÄ‚îÄ -->
    <section id="pageFinanceiro" class="page hidden">
      <div class="page-header">
        <div>
          <h2 class="page-title">Financeiro</h2>
          <p class="page-sub">Cobran√ßas de subloca√ß√£o via Mercado Pago</p>
        </div>
        <button class="btn-primary" onclick="openModal('modalCobranca')">+ Gerar Cobran√ßa</button>
      </div>

      <div class="stats-row" id="statsFinanceiro"></div>

      <div class="mp-config-banner" id="mpBanner">
        <div class="mp-banner-icon">üí≥</div>
        <div>
          <strong>Configure o Mercado Pago</strong>
          <p>Adicione suas credenciais para cobrar automaticamente por PIX e cart√£o.</p>
        </div>
        <button class="btn-outline" onclick="goTo('config')">Configurar agora</button>
      </div>

      <div class="table-card">
        <table class="data-table">
          <thead>
            <tr><th>Psic√≥loga</th><th>Refer√™ncia</th><th>Valor</th><th>Vencimento</th><th>Status</th><th>A√ß√µes</th></tr>
          </thead>
          <tbody id="finBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ RELAT√ìRIOS ‚îÄ‚îÄ -->
    <section id="pageRelatorios" class="page hidden">
      <div class="page-header">
        <div>
          <h2 class="page-title">Relat√≥rios</h2>
          <p class="page-sub">An√°lises de ocupa√ß√£o e desempenho</p>
        </div>
      </div>
      <div class="relatorios-grid">
        <div class="relatorio-card" onclick="gerarRelatorioOcupacao()">
          <div class="rel-icon">‚¨°</div>
          <h3>Ocupa√ß√£o de Salas</h3>
          <p>Taxa de uso por sala, dia e turno</p>
          <span class="rel-link">Gerar relat√≥rio ‚Üí</span>
        </div>
        <div class="relatorio-card" onclick="gerarRelatorioFinanceiro()">
          <div class="rel-icon">‚óá</div>
          <h3>Financeiro Mensal</h3>
          <p>Receita por psic√≥loga e sala</p>
          <span class="rel-link">Gerar relat√≥rio ‚Üí</span>
        </div>
        <div class="relatorio-card" onclick="gerarRelatorioDisponibilidade()">
          <div class="rel-icon">‚óé</div>
          <h3>Disponibilidade PDF</h3>
          <p>Hor√°rios livres para enviar √†s psic√≥logas</p>
          <span class="rel-link">Gerar PDF ‚Üí</span>
        </div>
        <div class="relatorio-card" onclick="gerarRelatorioAssiduidade()">
          <div class="rel-icon">‚äû</div>
          <h3>Assiduidade</h3>
          <p>Presen√ßa e cancelamentos por psic√≥loga</p>
          <span class="rel-link">Gerar relat√≥rio ‚Üí</span>
        </div>
      </div>
      <div id="relatorioOutput" class="relatorio-output hidden"></div>
    </section>

    <!-- ‚îÄ‚îÄ CONFIGURA√á√ïES ‚îÄ‚îÄ -->
    <section id="pageConfig" class="page hidden">
      <div class="page-header">
        <div>
          <h2 class="page-title">Configura√ß√µes</h2>
          <p class="page-sub">Cl√≠nica, assinatura e integra√ß√µes</p>
        </div>
      </div>
      <div class="config-grid">
        <div class="config-section">
          <h3>Dados da Cl√≠nica</h3>
          <div class="field"><label>Nome da cl√≠nica</label><input type="text" id="cfgNome" /></div>
          <div class="field"><label>CNPJ</label><input type="text" id="cfgCNPJ" placeholder="00.000.000/0001-00" /></div>
          <div class="field"><label>Endere√ßo</label><input type="text" id="cfgEndereco" /></div>
          <div class="field"><label>Telefone</label><input type="text" id="cfgTel" /></div>
          <button class="btn-primary" onclick="salvarConfig()">Salvar dados</button>
        </div>

        <div class="config-section">
          <h3>Mercado Pago</h3>
          <p class="form-hint">Suas credenciais s√£o criptografadas e nunca compartilhadas.</p>
          <div class="field"><label>Access Token (Produ√ß√£o)</label><input type="password" id="cfgMPToken" placeholder="APP_USR-..." /></div>
          <div class="field"><label>Public Key</label><input type="text" id="cfgMPPubKey" placeholder="APP_USR-..." /></div>
          <button class="btn-primary" onclick="salvarMP()">Salvar integra√ß√£o</button>
          <div id="mpStatus" class="mp-status"></div>
        </div>

        <div class="config-section">
          <h3>Sua Assinatura</h3>
          <div class="plan-card active-plan">
            <div class="plan-name">Plano Profissional</div>
            <div class="plan-price">R$ 97<span>/m√™s</span></div>
            <ul class="plan-features">
              <li>‚úì Salas ilimitadas</li>
              <li>‚úì Psic√≥logas ilimitadas</li>
              <li>‚úì Cobran√ßas via Mercado Pago</li>
              <li>‚úì Relat√≥rios completos</li>
              <li>‚úì Suporte priorit√°rio</li>
            </ul>
            <div class="plan-status">Ativa ‚Äî pr√≥xima cobran√ßa em <strong>15/03/2026</strong></div>
          </div>
          <button class="btn-outline" onclick="gerenciarAssinatura()">Gerenciar assinatura</button>
        </div>
      </div>
    </section>

  </main>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MODAIS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- Modal Sala -->
<div id="modalSala" class="modal-overlay hidden">
  <div class="modal-box">
    <div class="modal-head">
      <h3 id="modalSalaTitle">Nova Sala</h3>
      <button onclick="closeModal('modalSala')">‚úï</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="salaId" />
      <div class="field"><label>Nome da sala</label><input type="text" id="salaNome" placeholder="Ex: Sala 01, Sala Azul..." /></div>
      <div class="field"><label>Endere√ßo / localiza√ß√£o</label><input type="text" id="salaEndereco" placeholder="Ex: 2¬∫ andar, sala 201" /></div>
      <div class="field-row">
        <div class="field"><label>Hora in√≠cio</label><input type="time" id="salaHoraInicio" value="08:00" /></div>
        <div class="field"><label>Hora fim</label><input type="time" id="salaHoraFim" value="21:00" /></div>
      </div>
      <div class="field">
        <label>Dias dispon√≠veis</label>
        <div class="days-picker" id="daysPicker">
          <button type="button" class="day-btn" data-day="segunda" onclick="toggleDay(this)">SEG</button>
          <button type="button" class="day-btn" data-day="terca" onclick="toggleDay(this)">TER</button>
          <button type="button" class="day-btn" data-day="quarta" onclick="toggleDay(this)">QUA</button>
          <button type="button" class="day-btn" data-day="quinta" onclick="toggleDay(this)">QUI</button>
          <button type="button" class="day-btn" data-day="sexta" onclick="toggleDay(this)">SEX</button>
          <button type="button" class="day-btn" data-day="sabado" onclick="toggleDay(this)">S√ÅB</button>
        </div>
      </div>
      <div class="field">
        <label>Valor da subloca√ß√£o (por sess√£o)</label>
        <div class="input-prefix"><span>R$</span><input type="number" id="salaValor" placeholder="150.00" step="0.01" /></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeModal('modalSala')">Cancelar</button>
      <button class="btn-primary" onclick="salvarSala()">Salvar sala</button>
    </div>
  </div>
</div>

<!-- Modal Nova Reserva (3 passos) -->
<div id="modalReserva" class="modal-overlay hidden">
  <div class="modal-box modal-lg" style="max-width:560px;">
    <div class="modal-head">
      <div>
        <h3 id="reservaTitle">Nova Reserva</h3>
        <div style="display:flex;gap:6px;margin-top:6px;">
          <div id="rStep1dot" style="height:3px;width:32px;border-radius:2px;background:#0d9488;transition:.3s;"></div>
          <div id="rStep2dot" style="height:3px;width:32px;border-radius:2px;background:#e2e8f0;transition:.3s;"></div>
          <div id="rStep3dot" style="height:3px;width:32px;border-radius:2px;background:#e2e8f0;transition:.3s;"></div>
        </div>
      </div>
      <button onclick="closeModal('modalReserva')">‚úï</button>
    </div>

    <!-- PASSO 1: Dados do Profissional -->
    <div id="rPasso1" class="modal-body">
      <p style="font-size:12px;font-weight:600;color:#0d9488;text-transform:uppercase;letter-spacing:.08em;margin:0 0 16px;">Passo 1 ‚Äî Profissional</p>
      <input type="hidden" id="psiId" />
      <div class="field"><label>Nome completo</label><input type="text" id="psiNome" placeholder="Ex: Dr. Carlos Mendes" /></div>
      <div class="field-row">
        <div class="field">
          <label>Conselho Regional</label>
          <select id="psiConselho">
            <option value="CRP">CRP ‚Äî Psicologia</option>
            <option value="CRM">CRM ‚Äî Medicina</option>
            <option value="CRO">CRO ‚Äî Odontologia</option>
            <option value="CRN">CRN ‚Äî Nutri√ß√£o</option>
            <option value="CREFITO">CREFITO ‚Äî Fisioterapia</option>
            <option value="CRFa">CRFa ‚Äî Fonoaudiologia</option>
            <option value="CRO">CRO ‚Äî Terapia Ocup.</option>
            <option value="Outro">Outro</option>
          </select>
        </div>
        <div class="field"><label>N√∫mero do registro</label><input type="text" id="psiCRP" placeholder="Ex: 06/12345" /></div>
      </div>
      <div class="field-row">
        <div class="field"><label>E-mail</label><input type="email" id="psiEmail" placeholder="profissional@email.com" /></div>
        <div class="field"><label>WhatsApp</label><input type="text" id="psiTel" placeholder="(11) 99999-9999" /></div>
      </div>
      <div class="field">
        <label>Especialidade</label>
        <input type="text" id="psiEspecialidade" placeholder="Ex: Psicoterapia, Cl√≠nica Geral, Ortodontia..." />
      </div>
    </div>

    <!-- PASSO 2: Detalhes da Reserva -->
    <div id="rPasso2" class="modal-body" style="display:none;">
      <p style="font-size:12px;font-weight:600;color:#0d9488;text-transform:uppercase;letter-spacing:.08em;margin:0 0 16px;">Passo 2 ‚Äî Reserva</p>
      <div class="field-row">
        <div class="field"><label>Sala</label>
          <select id="psiSala"><option value="">Selecione...</option></select>
        </div>
        <div class="field">
          <label>Tipo de subloca√ß√£o</label>
          <select id="psiTipoSub">
            <option value="avulso">Avulso (por hora)</option>
            <option value="semanal">Semanal</option>
            <option value="quinzenal">Quinzenal</option>
            <option value="mensal">Mensal fixo</option>
          </select>
        </div>
      </div>
      <div class="field-row">
        <div class="field"><label>Data in√≠cio</label><input type="date" id="psiDataInicio" /></div>
        <div class="field"><label>Data fim (opcional)</label><input type="date" id="psiDataFim" /></div>
      </div>
      <div class="field-row">
        <div class="field"><label>Hor√°rio in√≠cio</label><input type="time" id="psiHoraI" value="08:00" /></div>
        <div class="field"><label>Hor√°rio fim</label><input type="time" id="psiHoraF" value="09:00" /></div>
      </div>
    </div>

    <!-- PASSO 3: Financeiro -->
    <div id="rPasso3" class="modal-body" style="display:none;">
      <p style="font-size:12px;font-weight:600;color:#0d9488;text-transform:uppercase;letter-spacing:.08em;margin:0 0 16px;">Passo 3 ‚Äî Cobran√ßa</p>
      <div class="field-row">
        <div class="field"><label>Valor por hora (R$)</label>
          <div class="input-prefix"><span>R$</span><input type="number" id="psiValor" placeholder="0.00" step="0.01" /></div>
        </div>
        <div class="field"><label>Vencimento</label><input type="date" id="psiVenc" /></div>
      </div>
      <div class="field"><label>Descri√ß√£o da cobran√ßa</label>
        <input type="text" id="psiCobDesc" placeholder="Ex: Subloca√ß√£o sala 01 ‚Äî mar√ßo/2026" />
      </div>
      <div class="field">
        <label>Forma de pagamento</label>
        <div style="display:flex;gap:8px;margin-top:4px;">
          <div class="mp-method active" onclick="selectPagto(this,'pix')"><span>PIX</span><small>Imediato</small></div>
          <div class="mp-method" onclick="selectPagto(this,'cartao')"><span>Cart√£o</span><small>Cr√©dito/D√©bito</small></div>
          <div class="mp-method" onclick="selectPagto(this,'boleto')"><span>Boleto</span><small>3 dias √∫teis</small></div>
        </div>
      </div>
      <input type="hidden" id="psiPagtoTipo" value="pix" />
    </div>

    <div class="modal-footer" style="justify-content:space-between;">
      <button class="btn-outline" id="rBtnVoltar" onclick="reservaVoltar()" style="display:none;">‚Üê Voltar</button>
      <button class="btn-outline" id="rBtnCancelar" onclick="closeModal('modalReserva')">Cancelar</button>
      <button class="btn-primary" id="rBtnAvancar" onclick="reservaAvancar()">Continuar ‚Üí</button>
    </div>
  </div>
</div>

<!-- Modal Editar Profissional (simples) -->
<div id="modalPsi" class="modal-overlay hidden">
  <div class="modal-box">
    <div class="modal-head">
      <h3 id="modalPsiTitle">Editar Profissional</h3>
      <button onclick="closeModal('modalPsi')">‚úï</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="psiEditId" />
      <div class="field"><label>Nome completo</label><input type="text" id="psiEditNome" /></div>
      <div class="field-row">
        <div class="field"><label>Conselho</label>
          <select id="psiEditConselho">
            <option value="CRP">CRP</option><option value="CRM">CRM</option>
            <option value="CRO">CRO</option><option value="CRN">CRN</option>
            <option value="CREFITO">CREFITO</option><option value="Outro">Outro</option>
          </select>
        </div>
        <div class="field"><label>Registro</label><input type="text" id="psiEditCRP" /></div>
      </div>
      <div class="field"><label>E-mail</label><input type="email" id="psiEditEmail" /></div>
      <div class="field"><label>Telefone</label><input type="text" id="psiEditTel" /></div>
      <div class="field"><label>Tipo subloca√ß√£o</label>
        <select id="psiEditTipoSub">
          <option value="avulso">Avulso</option>
          <option value="semanal">Semanal</option>
          <option value="quinzenal">Quinzenal</option>
          <option value="mensal">Mensal</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeModal('modalPsi')">Cancelar</button>
      <button class="btn-primary" onclick="salvarPsi()">Salvar</button>
    </div>
  </div>
</div>

<!-- Modal Agendamento -->
<div id="modalAgend" class="modal-overlay hidden">
  <div class="modal-box modal-lg">
    <div class="modal-head">
      <h3 id="modalAgendTitle">Novo Agendamento</h3>
      <button onclick="closeModal('modalAgend')">‚úï</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="agendId" />
      <div class="field-row">
        <div class="field"><label>Psic√≥loga</label>
          <select id="agendPsi"><option value="">Selecione...</option></select>
        </div>
        <div class="field"><label>Sala</label>
          <select id="agendSala"><option value="">Selecione...</option></select>
        </div>
      </div>
      <div class="field"><label>Nome do paciente</label><input type="text" id="agendPaciente" placeholder="Nome completo" /></div>
      <div class="field-row">
        <div class="field"><label>Data</label><input type="date" id="agendData" /></div>
        <div class="field"><label>Hora in√≠cio</label><input type="time" id="agendHoraI" /></div>
        <div class="field"><label>Hora fim</label><input type="time" id="agendHoraF" /></div>
      </div>
      <div class="field-row">
        <div class="field"><label>Valor (R$)</label>
          <div class="input-prefix"><span>R$</span><input type="number" id="agendValor" placeholder="150.00" step="0.01" /></div>
        </div>
        <div class="field"><label>Frequ√™ncia</label>
          <select id="agendFreq">
            <option value="avulso">Avulso</option>
            <option value="semanal">Semanal</option>
            <option value="quinzenal">Quinzenal</option>
          </select>
        </div>
      </div>
      <div class="field"><label>Observa√ß√µes</label><textarea id="agendObs" rows="2" placeholder="Informa√ß√µes adicionais..."></textarea></div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeModal('modalAgend')">Cancelar</button>
      <button class="btn-primary" onclick="salvarAgendamento()">Salvar agendamento</button>
    </div>
  </div>
</div>

<!-- Modal Cobran√ßa MP -->
<div id="modalCobranca" class="modal-overlay hidden">
  <div class="modal-box">
    <div class="modal-head">
      <h3>Gerar Cobran√ßa</h3>
      <button onclick="closeModal('modalCobranca')">‚úï</button>
    </div>
    <div class="modal-body">
      <div class="field"><label>Psic√≥loga</label>
        <select id="cobPsi"><option value="">Selecione...</option></select>
      </div>
      <div class="field-row">
        <div class="field"><label>Valor (R$)</label>
          <div class="input-prefix"><span>R$</span><input type="number" id="cobValor" placeholder="0.00" step="0.01" /></div>
        </div>
        <div class="field"><label>Vencimento</label><input type="date" id="cobVenc" /></div>
      </div>
      <div class="field"><label>Descri√ß√£o</label><input type="text" id="cobDesc" placeholder="Ex: Subloca√ß√£o sala 01 ‚Äî fevereiro/2026" /></div>
      <div class="mp-methods">
        <div class="mp-method active"><span>PIX</span><small>Pagamento imediato</small></div>
        <div class="mp-method"><span>Cart√£o</span><small>D√©bito/cr√©dito</small></div>
        <div class="mp-method"><span>Boleto</span><small>3 dias √∫teis</small></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeModal('modalCobranca')">Cancelar</button>
      <button class="btn-primary" onclick="gerarCobranca()">Gerar e enviar link</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div id="toast" class="toast hidden"></div>

<script src="app.js"></script>
</body>
</html>
